---
title: Quick Start
description: Get up and running with Smithers in minutes
---

# Quick Start

This guide walks you through creating and running your first Smithers workflow.

## Prerequisites

- **[Bun](https://bun.sh)** v1.0+ (required runtime)
- **[Claude Code](https://www.npmjs.com/package/@anthropic-ai/claude-code)** - `npm install -g @anthropic-ai/claude-code`

<Note>
Smithers uses Claude Code's subscription for API access - no separate API key needed.
</Note>

## Installation

```bash
bun add smithers-orchestrator
```

## Canonical Workflow

Create `my-workflow.tsx`:

```tsx
#!/usr/bin/env bun

import {
  createSmithersRoot,
  createSmithersDB,
  SmithersProvider,
  Phase,
  Step,
  Claude,
} from "smithers-orchestrator";

// 1. Create database for state persistence
const db = await createSmithersDB({ path: ".smithers/my-workflow" });

// 2. Start or resume execution
let executionId: string;
const incomplete = await db.execution.findIncomplete();
if (incomplete) {
  executionId = incomplete.id;
  console.log("Resuming:", executionId);
} else {
  executionId = await db.execution.start("My Workflow", "my-workflow.tsx");
}

// 3. Define workflow with Phase/Step/Claude composition
function Workflow() {
  return (
    <SmithersProvider db={db} executionId={executionId} maxIterations={10}>
      <Phase name="Research">
        <Step name="Analyze codebase">
          <Claude model="sonnet">
            Analyze this codebase structure and identify patterns.
          </Claude>
        </Step>
        <Step name="Document findings">
          <Claude model="sonnet">
            Document the key patterns found in the previous analysis.
          </Claude>
        </Step>
      </Phase>

      <Phase name="Implementation">
        <Step name="Write code">
          <Claude model="sonnet">
            Implement improvements based on the research phase.
          </Claude>
        </Step>
        <Step name="Write tests">
          <Claude model="sonnet">
            Write tests for the new implementation.
          </Claude>
        </Step>
      </Phase>

      <Phase name="Review">
        <Claude model="sonnet">
          Review all changes and ensure quality standards are met.
        </Claude>
      </Phase>
    </SmithersProvider>
  );
}

// 4. Mount and run orchestrator
const root = createSmithersRoot();
await root.mount(Workflow);

// 5. Complete and close
await db.execution.complete(executionId);
await db.close();
```

## Run

```bash
bun my-workflow.tsx
```

## Understanding the Code

<Steps>
  <Step title="Create Database">
    ```tsx
    const db = await createSmithersDB({ path: ".smithers/my-workflow" });
    ```
    SQLite database persists all state, enabling resume on crash/restart.
  </Step>

  <Step title="Start/Resume Execution">
    ```tsx
    const incomplete = await db.execution.findIncomplete();
    if (incomplete) {
      executionId = incomplete.id;
    } else {
      executionId = await db.execution.start("My Workflow", "my-workflow.tsx");
    }
    ```
    Automatically resumes incomplete executions.
  </Step>

  <Step title="SmithersProvider">
    ```tsx
    <SmithersProvider db={db} executionId={executionId} maxIterations={10}>
    ```
    Provides database and orchestration context to all children.
  </Step>

  <Step title="Phase/Step/Claude Composition">
    ```tsx
    <Phase name="Research">
      <Step name="Analyze">
        <Claude model="sonnet">Prompt here</Claude>
      </Step>
    </Phase>
    ```
    - **Phase**: Sequential workflow stages (only active phase executes)
    - **Step**: Sequential tasks within a phase
    - **Claude**: AI agent execution
  </Step>

  <Step title="Mount with createSmithersRoot">
    ```tsx
    const root = createSmithersRoot();
    await root.mount(Workflow);
    ```
    React reconciler mounts and executes the component tree.
  </Step>

  <Step title="Close Database">
    ```tsx
    await db.execution.complete(executionId);
    await db.close();
    ```
    Mark complete and flush writes.
  </Step>
</Steps>

## Minimal Example

For simple single-agent tasks:

```tsx
#!/usr/bin/env bun

import {
  createSmithersRoot,
  createSmithersDB,
  SmithersProvider,
  Claude,
} from "smithers-orchestrator";

const db = await createSmithersDB({ path: ".smithers/simple" });
const executionId = await db.execution.start("Simple", "simple.tsx");

function Workflow() {
  return (
    <SmithersProvider db={db} executionId={executionId}>
      <Claude model="sonnet" onFinished={(r) => console.log(r.output)}>
        Analyze this codebase and suggest three improvements.
      </Claude>
    </SmithersProvider>
  );
}

const root = createSmithersRoot();
await root.mount(Workflow);
await db.close();
```

## Let Claude Write It

The real power of Smithers: tell your agent what you want and it generates the workflow:

```
User: "Create a workflow that monitors my CI, fixes failures automatically,
       and escalates after 3 failed attempts"

Claude: *generates ci-recovery.tsx*
```

Install the Claude Code plugin to enable this:

```bash
/plugin marketplace add evmts/smithers
/plugin install smithers@smithers
```

## Inspecting State

View execution history and state with the database:

```bash
# View execution history
smithers db executions

# View current state
smithers db state

# View database statistics
smithers db stats
```

## Next Steps

<CardGroup cols={2}>
  <Card title="Ralph Wiggum Loop" icon="rotate" href="/concepts/ralph-wiggum-loop">
    Understand the execution model
  </Card>
  <Card title="Claude Component" icon="cube" href="/components/claude">
    Learn the full Claude API
  </Card>
  <Card title="Database Persistence" icon="database" href="/concepts/database-persistence">
    Master database persistence
  </Card>
  <Card title="Examples" icon="code" href="/examples/hello-world">
    See more workflow patterns
  </Card>
</CardGroup>
