---
title: VCS Integration
description: Git and Jujutsu version control integration
---

# VCS Integration

```tsx
<Commit message="feat: Add auth" all notes={{ smithers: true }} />
```

## Auto-Generated Messages

```tsx
<Commit autoGenerate all />
```

## Selective Commits

```tsx
<Commit message="fix: Update config" files={["config.json", "settings.ts"]} />
```

## Git Notes

```tsx
<Commit
  message="feat: New feature"
  notes={{ smithers: true, executionId, prompt: "Implement feature" }}
/>
```

Read with `git notes show HEAD`.

## Complete Workflow

```tsx
import { useQueryValue } from "smithers-orchestrator/reactive-sqlite";

function FeatureWorkflowBody() {
  const { db, reactiveDb } = useSmithers();
  const { data: phaseJson } = useQueryValue<string>(
    reactiveDb, "SELECT value FROM state WHERE key = 'phase'"
  );
  const phase = phaseJson ? JSON.parse(phaseJson) : "implement";

  return (
    <>
      <If condition={phase === "implement"}>
        <Claude
          allowedTools={["Edit", "Write"]}
          onFinished={() => db.state.set("phase", "review")}
        >
          Implement the feature.
        </Claude>
      </If>

      <If condition={phase === "review"}>
        <Review
          target={{ type: "diff", ref: "main" }}
          criteria={["No security issues", "Tests pass"]}
          onFinished={(r) => db.state.set("phase", r.approved ? "commit" : "implement")}
        />
      </If>

      <If condition={phase === "commit"}>
        <Commit autoGenerate all onFinished={() => db.state.set("phase", "done")} />
      </If>
    </>
  );
}
```

## Jujutsu Snapshots

```tsx
// Snapshot before risky operations
db.vcs.logSnapshot({
  snapshotId: await jjSnapshot(),
  description: "Before refactoring",
  timestamp: new Date(),
});

// Rollback if needed
const snapshots = db.vcs.getSnapshots(1);
await jjRestore(snapshots[0].snapshotId);
```

## Database Tracking

```tsx
db.vcs.logCommit({
  hash: "abc123",
  message: "feat: Add feature",
  author: "claude",
  timestamp: new Date(),
  filesChanged: 5,
  insertions: 100,
  deletions: 20,
  vcsType: "git",
});

const commits = db.vcs.getCommits(10);
```

## Related

<CardGroup cols={2}>
  <Card title="Commit Component" icon="code-commit" href="/components/commit" />
  <Card title="Review Component" icon="magnifying-glass" href="/components/review" />
</CardGroup>
