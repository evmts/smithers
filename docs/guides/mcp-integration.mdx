---
title: MCP Integration
description: Connect Claude to external tools via Model Context Protocol
---

# MCP Integration

```tsx
<Claude model="sonnet" maxTurns={10}>
  <Sqlite path="./data.db" readOnly>
    Schema: users(id, name, email), orders(id, user_id, total)
  </Sqlite>
  Find users who placed orders over $100.
</Claude>
```

## Multiple Databases

```tsx
<Claude model="sonnet" maxTurns={15}>
  <Sqlite path="./users.db">User database</Sqlite>
  <Sqlite path="./analytics.db">Analytics database</Sqlite>
  Cross-reference user signups with analytics events.
</Claude>
```

## Custom Tools

<Warning>
**Experimental.** The `tools` prop API may change. Prefer built-in `<Sqlite>` for most cases.
</Warning>

```tsx
<Claude
  tools={[{
    name: "query_database",
    description: "Query PostgreSQL",
    inputSchema: {
      type: "object",
      properties: { query: { type: "string" } },
      required: ["query"],
    },
    execute: async (input) => JSON.stringify(await db.query(input.query)),
  }]}
>
  Query for user statistics.
</Claude>
```

## Data Pipeline

```tsx
import { useSmithers, If, Claude, Sqlite, useQueryValue } from "smithers-orchestrator";

function DataPipelineBody() {
  const { db } = useSmithers();
  const { data: phase } = useQueryValue<string>(
    db.db, "SELECT value FROM state WHERE key = 'phase'"
  );
  const { data } = useQueryValue<string>(
    db.db, "SELECT value FROM state WHERE key = 'data'"
  );

  return (
    <>
      <If condition={phase === "query"}>
        <Claude onFinished={(r) => { db.state.set("data", r.output); db.state.set("phase", "analyze"); }}>
          <Sqlite path="./sales.db" readOnly>Sales data</Sqlite>
          Query top 10 products by revenue.
        </Claude>
      </If>
      <If condition={phase === "analyze"}>
        <Claude allowedTools={["Write"]} onFinished={() => db.state.set("phase", "done")}>
          Analyze and save report: {data}
        </Claude>
      </If>
    </>
  );
}
```

## Security

<Warning>Always use `readOnly` for production databases.</Warning>

```tsx
<Sqlite path="./prod.db" readOnly>...</Sqlite>  // Safe
<Sqlite path="./prod.db">...</Sqlite>           // Risky
```

## Related

<CardGroup cols={2}>
  <Card title="Sqlite Component" icon="database" href="/components/sqlite" />
  <Card title="MCP Database Example" icon="code" href="/examples/mcp-database" />
</CardGroup>
