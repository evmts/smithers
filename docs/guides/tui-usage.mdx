---
title: TUI Usage Guide
description: Interactive terminal UI for monitoring and controlling agent execution
---

# TUI Usage Guide

Smithers includes an interactive Terminal UI (TUI) for visualizing and controlling agent execution in real-time. The TUI provides a tree view of your agent hierarchy, execution status, and detailed output from each agent.

## Quick Start

Run any agent with the `--tui` flag:

```bash
smithers run agent.tsx --tui
```

This opens an interactive interface showing:

- **Tree view** (left): Your agent hierarchy with execution status
- **Detail panel** (right): Agent prompts and outputs
- **Header** (top): Frame count and elapsed time
- **Status bar** (bottom): Available keyboard shortcuts

## Keyboard Navigation

### Tree View

| Key | Action |
|-----|--------|
| `↑` / `↓` | Navigate between nodes |
| `←` / `→` | Collapse / expand nodes |
| `Space` | Toggle expand/collapse |
| `Enter` | View agent details |
| `q` | Quit TUI |

### Detail View

| Key | Action |
|-----|--------|
| `Escape` | Return to tree view |
| `↑` / `↓` | Scroll output |

## Interface Overview

### Tree View (Left Panel)

The tree view shows your agent hierarchy with visual indicators:

```
ROOT
├─ [✓] Phase: Research
│  ├─ [✓] Claude (Agent SDK)
│  └─ [✓] Step: Analyze results
├─ [►] Phase: Implementation
│  ├─ [►] Claude (Agent SDK)    ← Currently running
│  └─ [·] Step: Write tests     ← Pending
└─ [·] Phase: Review
   └─ [·] Claude (Agent SDK)
```

**Status Icons:**

- `[✓]` - Completed successfully
- `[►]` - Currently running
- `[·]` - Pending (not started)
- `[✗]` - Failed with error

### Detail Panel (Right Panel)

When you press `Enter` on an agent node, the detail panel shows:

- **Prompt**: The agent's input prompt
- **Output**: The agent's result/output
- **Scrolling**: Use `↑`/`↓` to scroll long outputs

### Header (Top)

Shows real-time execution metrics:

```
Frame 3 | Elapsed: 12.3s
```

- **Frame**: Current Ralph Wiggum loop frame number
- **Elapsed**: Total execution time

### Status Bar (Bottom)

Context-aware keyboard shortcuts:

```
↑↓: Navigate  Enter: Details  q: Quit
```

Or in detail view:

```
↑↓: Scroll  Esc: Back  q: Quit
```

## Example Session

### 1. Start with TUI

```bash
smithers run examples/feature-workflow/agent.tsx --tui
```

### 2. Watch Execution

The tree updates in real-time as agents execute:

```
ROOT
├─ [✓] Phase: Planning
│  └─ [✓] Claude: Create implementation plan
├─ [►] Phase: Implementation
│  ├─ [✓] Claude: Write core functionality
│  ├─ [►] Claude: Write tests
│  └─ [·] Claude: Update documentation
└─ [·] Phase: Review
   └─ [·] Claude: Code review
```

### 3. Inspect Output

- Press `Enter` on "Claude: Create implementation plan"
- View the planning output in detail panel
- Press `Escape` to return to tree view

### 4. Navigate Tree

- Use `↑`/`↓` to move between nodes
- Use `→` to expand collapsed nodes
- Use `←` to collapse expanded nodes

### 5. Exit

Press `q` to quit the TUI when execution completes or at any time.

## Use Cases

### Monitoring Long-Running Agents

For agents that run for minutes or hours, the TUI provides visibility:

```bash
smithers run agents/data-pipeline.tsx --tui
```

Watch progress through multiple phases without waiting for completion.

### Debugging Multi-Agent Workflows

See exactly which agent is running and what it's doing:

```
ROOT
├─ [✓] Coordinator
├─ [►] Worker 1: Processing batch 1   ← Currently active
├─ [·] Worker 2: Processing batch 2   ← Waiting
└─ [·] Worker 3: Processing batch 3
```

### Reviewing Agent Output

Inspect output from completed agents without re-running:

1. Navigate to completed agent node
2. Press `Enter` to view output
3. Scroll through results
4. Press `Escape` to continue

### Real-Time Execution Tracking

See frame-by-frame updates as your agent reacts to state changes:

```
Frame 1: Initial render
Frame 2: Agent A finishes → state update
Frame 3: Agent B starts based on A's result
Frame 4: Agent B finishes → state update
Frame 5: Final phase triggers
```

## Combining with Other Flags

### TUI + Mock Mode

Test your agent structure without API calls:

```bash
smithers run agent.tsx --tui --mock
```

**Use case**: Verify component hierarchy and state flow before running with real API.

### TUI + Auto-Approve

Skip Human approval prompts:

```bash
smithers run agent.tsx --tui --yes
```

**Use case**: Automated testing with visual monitoring.

### TUI + Verbose Logging

See detailed logs alongside TUI:

```bash
smithers run agent.tsx --tui --verbose
```

**Note**: Verbose logs are written to stderr, TUI to stdout. Logs appear below TUI or in separate terminal.

### TUI + Max Frames

Limit execution with visual feedback:

```bash
smithers run agent.tsx --tui --max-frames 10
```

**Use case**: Debug infinite loops by stopping after N frames.

## Terminal Requirements

### Minimum Size

The TUI requires a minimum terminal size:

- **Width**: 80 columns
- **Height**: 24 rows

If your terminal is too small, you'll see:

```
Terminal too small. Minimum 80x24 required.
Current: 60x20
```

**Solution**: Resize your terminal or maximize the window.

### Color Support

The TUI uses ANSI colors for status indicators:

- Works in most modern terminals (iTerm2, Terminal.app, Windows Terminal, etc.)
- Falls back to plain text in limited environments

### Unicode Support

Status icons use Unicode characters:

- `✓` (checkmark) for completed
- `►` (triangle) for running
- `·` (dot) for pending
- `✗` (x) for errors

If your terminal doesn't support Unicode, you'll see ASCII alternatives.

## Troubleshooting

### TUI Not Updating

**Symptom**: Tree view doesn't update during execution.

**Cause**: Terminal not in raw mode or output buffering.

**Solution**:

1. Ensure you're using a compatible terminal
2. Try running without other output redirects
3. Check that stdout is a TTY: `smithers run agent.tsx --tui`

### Garbled Output

**Symptom**: Screen rendering is corrupted.

**Cause**: Terminal size changed during execution.

**Solution**:

1. Don't resize terminal while TUI is running
2. If corrupted, quit (`q`) and restart

### TUI Exits Immediately

**Symptom**: TUI starts then exits without showing anything.

**Cause**: Agent completes too quickly (mock mode or empty agent).

**Solution**:

1. Agents that complete in <100ms may not display
2. Use `--verbose` to see logs
3. Add delays or more work to see TUI

### Keyboard Not Responding

**Symptom**: Arrow keys don't navigate.

**Cause**: Terminal not capturing key input correctly.

**Solution**:

1. Ensure TUI has focus (click the terminal window)
2. Try a different terminal emulator
3. Check if terminal is in raw mode

## Implementation Details

### React Reconciler Integration

The TUI uses the same React reconciler as Smithers' core renderer:

- **SmithersNode tree**: Directly visualized in TUI
- **Real-time updates**: `onFrameUpdate` callback provides tree snapshots
- **No polling**: Push-based updates for efficiency

### Performance

The TUI renders at frame boundaries (not continuously):

- **Update frequency**: Once per Ralph Wiggum loop frame
- **Render time**: <10ms for trees with <100 nodes
- **Memory overhead**: ~1MB for TUI state

### Terminal Rendering

Uses OpenTUI library for terminal rendering:

- **Sub-millisecond frame times**: Smooth 60 FPS when needed
- **Efficient diffs**: Only updates changed regions
- **Raw mode**: Direct terminal control for responsive UI

## Advanced Usage

### Programmatic TUI

You can use the TUI programmatically in your own tools:

```typescript
import { executePlan, TuiRoot } from 'smithers'
import { renderToTerminal } from '@opentui/react'

// Render TUI
const renderer = renderToTerminal(<TuiRoot />)

// Execute with TUI updates
const result = await executePlan(<MyAgent />, {
  onFrameUpdate: (tree, frame) => {
    renderer.update(<TuiRoot tree={tree} frame={frame} />)
  },
})

// Cleanup
renderer.cleanup()
```

### Custom TUI Components

Extend the TUI with custom visualizations:

```typescript
import { TuiRoot, TreeView, AgentPanel } from 'smithers/tui'

function CustomTUI({ tree, frame }) {
  return (
    <Layout>
      <Header frame={frame} elapsed={Date.now() - startTime} />
      <TreeView tree={tree} />
      <CustomMetrics tree={tree} />  {/* Your custom component */}
      <AgentPanel />
    </Layout>
  )
}
```

## Future Enhancements

The following features are planned for future versions:

- **Interactive controls**: Pause/resume execution from TUI
- **Search**: Find nodes by name or content
- **Filtering**: Show only pending/running/failed nodes
- **Export**: Save TUI state to file for later review
- **Replay**: Step through execution history

## Related

<CardGroup cols={2}>
  <Card title="CLI Commands" icon="terminal" href="/cli/run">
    All available CLI flags
  </Card>
  <Card title="Interactive Commands" icon="keyboard" href="/guides/interactive-commands">
    Slash commands for execution control
  </Card>
  <Card title="VHS Demos" icon="video" href="/guides/vhs-recording">
    Record TUI sessions as GIFs
  </Card>
</CardGroup>
