---
title: Structured Output
description: Get typed, validated responses from Claude using Zod schemas
---

# Structured Output

```tsx
import { z } from "zod";

const ResultSchema = z.object({
  success: z.boolean(),
  message: z.string(),
});

<Claude
  schema={ResultSchema}
  onFinished={(result) => console.log(result.structured.success)}
>
  Complete the task.
</Claude>
```

## Schema with Descriptions

```tsx
const AnalysisSchema = z.object({
  summary: z.string().describe("1-2 sentence summary"),
  confidence: z.number().min(0).max(1),
  issues: z.array(z.object({
    severity: z.enum(["low", "medium", "high", "critical"]),
    description: z.string(),
    location: z.string(),
  })),
});
```

## Validation and Retry

```tsx
<Claude
  schema={AnalysisSchema}
  schemaRetries={2}
  retryOnValidationFailure={true}
  onError={(err) => console.error("Validation failed:", err)}
>
  Analyze the code.
</Claude>
```

## Custom Validation

```tsx
<Claude
  schema={AnalysisSchema}
  validate={(result) => {
    const data = result.structured;
    return data && data.issues.length > 0 && data.score >= 0;
  }}
  schemaRetries={2}
>
  Find issues in the code.
</Claude>
```

<Info>
The `validate` callback receives the full `AgentResult`. Access parsed data via `result.structured`.
</Info>

## TypeScript Integration

```tsx
type User = z.infer<typeof UserSchema>;

<Claude<User>
  schema={UserSchema}
  onFinished={(result) => {
    const user: User = result.structured!;
    console.log(user.role); // "admin" | "user" | "guest"
  }}
>
```

## Real-World Example

```tsx
const CodeReviewSchema = z.object({
  verdict: z.enum(["approve", "request_changes", "comment"]),
  issues: z.array(z.object({
    severity: z.enum(["critical", "major", "minor", "nitpick"]),
    category: z.enum(["security", "performance", "correctness"]),
    file: z.string(),
    title: z.string().max(100),
    description: z.string(),
  })),
  metrics: z.object({
    linesReviewed: z.number(),
    complexityScore: z.number().min(1).max(10),
  }),
});

<Claude
  model="opus"
  schema={CodeReviewSchema}
  schemaRetries={3}
  allowedTools={["Read", "Glob", "Grep"]}
  onFinished={(result) => {
    const review = result.structured!;
    if (review.verdict !== "approve") {
      console.log(`${review.issues.length} issues found`);
    }
  }}
>
  Review the changes in this PR.
</Claude>
```

## Related

<CardGroup cols={2}>
  <Card title="Claude Component" icon="robot" href="/components/claude" />
  <Card title="Structured Output Example" icon="code" href="/examples/structured-output" />
</CardGroup>
