---
title: Claude Code Log Format
description: How Claude Code stores session logs and how to map them to UIMessage parts
---

# Claude Code Log Format

Claude Code stores logs at `~/.claude/`:
- `history.jsonl` - Lightweight prompt history
- `projects/<project-slug>/*.jsonl` - Full session logs

<Note>
Newer versions use `sessions/` subdirectory with `session.jsonl` and `metadata.json`.
</Note>

## JSONL Structure

Common fields: `uuid`, `parentUuid`, `sessionId`, `type` (`user`|`assistant`), `timestamp`, `message`.

### User Message

```json
{ "type": "user", "message": { "role": "user", "content": "Write unit tests" } }
```

### Assistant Text

```json
{
  "type": "assistant",
  "message": { "role": "assistant", "content": [{ "type": "text", "text": "..." }] }
}
```

### Tool Use

```json
{
  "type": "assistant",
  "message": {
    "content": [{ "type": "tool_use", "id": "toolu_01...", "name": "Read", "input": {} }]
  }
}
```

### Tool Result

```json
{
  "type": "user",
  "message": {
    "content": [{ "type": "tool_result", "tool_use_id": "toolu_01...", "content": "..." }]
  },
  "toolUseResult": { "type": "text", "file": { "filePath": "...", "numLines": 42 } }
}
```

## Mapping to UIMessage

| Claude JSONL | UIMessage |
|--------------|-----------|
| `role=user text` | `UIMessage(role=user, parts=[text])` |
| `role=assistant text` | `UIMessage(role=assistant, parts=[text])` |
| `tool_use` | `DynamicToolUIPart(state=input-available)` |
| `tool_result` | `DynamicToolUIPart(state=output-available)` |
| `isApiErrorMessage` | `UIMessage` + `metadata.error=true` |

Tool linkage uses `tool_use_id`.

## Gaps

- No reasoning/extended thinking blocks observed
- No streaming markers
- No source citations
