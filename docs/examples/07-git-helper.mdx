---
title: "Git Helper"
description: "AI-powered git operations with natural language interface"
---

# Git Helper

An AI-powered interface to common git commands using Smithers and the Bash tool.

## What This Example Shows

- Running git commands via the `Bash` tool
- Command routing based on CLI arguments
- Natural language interpretation of git output
- Safe command execution with error handling

## The Code

```tsx
import { Claude, executePlan } from '@evmts/smithers'
import { create } from 'zustand'
import { useEffect } from 'react'

interface GitHelperState {
  command: 'status' | 'commit' | 'branch' | 'log' | 'diff' | 'done'
  result: string | null
  setCommand: (command: GitHelperState['command']) => void
  setResult: (result: string) => void
}

const useStore = create<GitHelperState>((set) => ({
  command: 'status',
  result: null,
  setCommand: (command) => set({ command }),
  setResult: (result) => set({ result }),
}))

function GitHelper({
  operation,
  ...args
}: {
  operation: string
  [key: string]: any
}) {
  const { command, setCommand, setResult } = useStore()

  // Initialize command from operation prop on mount
  useEffect(() => {
    setCommand(operation as GitHelperState['command'])
  }, [operation, setCommand])

  // Status command
  if (command === 'status') {
    return (
      <Claude
        allowedTools={['Bash']}
        onFinished={(result) => {
          setResult(result.text)
          setCommand('done')
        }}
      >
        Run `git status` and provide a summary of:
        - Modified files
        - Untracked files
        - Branch information
        - Whether there are changes to commit

        Format the output in a clear, readable way.
      </Claude>
    )
  }

  // Commit command
  if (command === 'commit') {
    const message = args.message || 'Update files'

    return (
      <Claude
        allowedTools={['Bash']}
        onFinished={(result) => {
          setResult(result.text)
          setCommand('done')
        }}
      >
        Create a git commit:
        1. Stage all changed files with `git add -A`
        2. Create commit with message: {message}
        3. Show the commit hash and summary
      </Claude>
    )
  }

  // Branch command
  if (command === 'branch') {
    const newBranch = args.branch

    if (newBranch) {
      return (
        <Claude
          allowedTools={['Bash']}
          onFinished={(result) => {
            setResult(result.text)
            setCommand('done')
          }}
        >
          Create and switch to new branch: {newBranch}
        </Claude>
      )
    }

    return (
      <Claude
        allowedTools={['Bash']}
        onFinished={(result) => {
          setResult(result.text)
          setCommand('done')
        }}
      >
        List all git branches with current branch highlighted
      </Claude>
    )
  }

  // Log command
  if (command === 'log') {
    const count = args.count || 5

    return (
      <Claude
        allowedTools={['Bash']}
        onFinished={(result) => {
          setResult(result.text)
          setCommand('done')
        }}
      >
        Show last {count} git commits with:
        - Commit hash (short)
        - Author
        - Date
        - Commit message
      </Claude>
    )
  }

  // Diff command
  if (command === 'diff') {
    const file = args.file

    return (
      <Claude
        allowedTools={['Bash']}
        onFinished={(result) => {
          setResult(result.text)
          setCommand('done')
        }}
      >
        Show git diff for {file || 'all changed files'}
        Summarize the changes in a readable format
      </Claude>
    )
  }

  return null // Done
}

// CLI execution
const operation = process.argv[2] || 'status'
const args = {
  message: process.argv[3],
  branch: process.argv[3],
  count: parseInt(process.argv[3] || '5'),
  file: process.argv[3],
}

console.log(`ðŸ”§ Git Helper - ${operation}`)

await executePlan(<GitHelper operation={operation} {...args} />)

console.log('âœ… Git operation complete')
```

## Running

### Check Repository Status

```bash
bun run examples/07-git-helper/agent.tsx status
```

Example output:
```
ðŸ”§ Git Helper - status

Branch: main
Modified: 3 files
Untracked: 1 file
Changes ready to commit: No

âœ… Git operation complete
```

### Create a Commit

```bash
bun run examples/07-git-helper/agent.tsx commit "Add new feature"
```

### List or Create Branches

```bash
# List all branches
bun run examples/07-git-helper/agent.tsx branch

# Create new branch
bun run examples/07-git-helper/agent.tsx branch feature/new-thing
```

### View Commit History

```bash
# Show last 5 commits (default)
bun run examples/07-git-helper/agent.tsx log

# Show last 10 commits
bun run examples/07-git-helper/agent.tsx log 10
```

### View Diff

```bash
# Diff all changed files
bun run examples/07-git-helper/agent.tsx diff

# Diff specific file
bun run examples/07-git-helper/agent.tsx diff src/index.ts
```

## Key Concepts

### Bash Tool Integration

The `Bash` tool allows Claude to execute shell commands safely:

```tsx
<Claude allowedTools={['Bash']}>
  Run `git status` and summarize the results
</Claude>
```

Claude can execute git commands and interpret the output.

### Command Routing

Uses state management to route to different command handlers:

```tsx
const useStore = create((set) => ({
  command: 'status',
  setCommand: (cmd) => set({ command: cmd }),
}))
```

Based on the `command` state, different Claude agents are rendered.

### Natural Language Interface

Claude interprets git output and presents it clearly:
- Summarizes complex diffs
- Highlights important information
- Formats output in readable tables

## Extending This Example

### Add PR Creation

```tsx
<Claude allowedTools={['Bash']}>
  1. Push current branch to remote
  2. Use `gh pr create` to open pull request
  3. Return the PR URL
</Claude>
```

### Add Merge Conflict Resolution

```tsx
<Claude allowedTools={['Bash', 'Read', 'Edit']}>
  1. Detect merge conflicts with `git status`
  2. Read conflicted files
  3. Analyze conflict markers
  4. Suggest resolution strategy
</Claude>
```

### Add Interactive Rebase Helper

```tsx
<Claude allowedTools={['Bash']}>
  1. Show last N commits
  2. Guide user through rebase decisions
  3. Handle rebase conflicts
</Claude>
```

## Safety Considerations

This example uses the `Bash` tool which can run arbitrary commands. In production:

1. **Validate inputs** - Sanitize branch names and commit messages
2. **Read-only mode** - Create a version that only reads git state
3. **Confirmation gates** - Use `<Human>` component for destructive operations

Example with confirmation:

```tsx
<Human
  message="Commit these changes?"
  onApprove={() => setPhase('commit')}
>
  Files to commit:
  {changedFiles.map(f => `\n- ${f}`).join('')}
</Human>
```

## Related Examples

- [09-parallel-worktrees](/examples/09-parallel-worktrees) - Work on multiple branches simultaneously
- [02-code-review](/examples/02-code-review) - Automated code review workflow
- [00-feature-workflow](/examples/feature-workflow) - Complete development workflow
