---
title: Kitchen Sink
description: Comprehensive example showcasing all major framework features
---

# Kitchen Sink

```tsx
#!/usr/bin/env smithers

import {
  createSmithersRoot,
  createSmithersDB,
  SmithersProvider,
  Ralph,
  Phase,
  Step,
  Claude,
  Human,
  Parallel,
  Task,
} from "smithers-orchestrator";

async function main() {
  const db = createSmithersDB({ path: ".smithers/kitchen-sink" });
  const executionId = db.execution.start("Kitchen Sink Demo", "kitchen-sink.tsx");

  function KitchenSinkWorkflow() {
    const isComplete = () => {
      const phases = db.phases.list(executionId);
      return phases.every(p => p.status === 'complete');
    };

    return (
      <SmithersProvider db={db} executionId={executionId}>
        <Ralph id="kitchen-sink-loop" condition={() => !isComplete()} maxIterations={20}>
          {/* PHASE 1: Research */}
          <Phase name="Research">
            <Step name="gather">
              <Claude model="sonnet">Research the codebase and identify key files</Claude>
            </Step>
            <Parallel>
              <Step name="analyze-frontend">
                <Claude model="haiku">Analyze frontend architecture</Claude>
              </Step>
              <Step name="analyze-backend">
                <Claude model="haiku">Analyze backend services</Claude>
              </Step>
            </Parallel>
          </Phase>

          {/* PHASE 2: Planning */}
          <Phase name="Planning">
            <Step name="review">
              <Human message="Review the research findings and approve the plan?" />
            </Step>
            <Step name="create-plan">
              <Claude model="sonnet">Create detailed implementation plan based on research</Claude>
            </Step>
            <Task done={false}>Define acceptance criteria</Task>
            <Task done={false}>Identify potential risks</Task>
          </Phase>

          {/* PHASE 3: Implementation */}
          <Phase name="Implementation">
            <Step name="implement">
              <Claude model="opus">Implement the planned changes with high quality</Claude>
            </Step>
            <Parallel>
              <Step name="write-tests">
                <Claude model="sonnet">Write comprehensive test suite</Claude>
              </Step>
              <Step name="update-docs">
                <Claude model="haiku">Update documentation</Claude>
              </Step>
            </Parallel>
          </Phase>
        </Ralph>
      </SmithersProvider>
    );
  }

  try {
    const root = createSmithersRoot();
    await root.mount(KitchenSinkWorkflow);
    db.execution.complete(executionId, { summary: "Kitchen sink workflow completed" });
  } catch (err) {
    const error = err instanceof Error ? err : new Error(String(err));
    db.execution.fail(executionId, error.message);
    throw error;
  } finally {
    db.close();
  }
}

main();
```

## What's Happening

- **Ralph**: Iteration loop that drives phase progression (required for Phase/Step/Parallel)
- **Phase**: Sequential stages; only active phase executes
- **Parallel**: Steps inside run concurrently
- **Human**: Pauses for approval before proceeding
- **Task**: Presentational checklist items (not runtime tasks)
- **Models**: Haiku (fast), Sonnet (reasoning), Opus (quality)

## Run It

```bash
bun kitchen-sink.tsx
```

## Inspect Execution

```bash
smithers db phases
smithers db executions
smithers db tasks
```
