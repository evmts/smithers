---
title: Smithers Hooks
description: React hooks for Smithers workflows
---

# Smithers Hooks

```tsx
import { useHuman, useSmithers, useRalphCount } from "smithers-orchestrator";

function Workflow() {
  const { ask } = useHuman();
  const { db, executionId } = useSmithers();
  const count = useRalphCount();
  
  const deploy = async () => {
    const choice = await ask<string>("Deploy?", { options: ["Yes", "No"] });
    if (choice === "Yes") { /* proceed */ }
  };
}
```

## useHuman

Pause execution for human input.

| Property | Type | Description |
|----------|------|-------------|
| `ask` | `<T>(prompt, options?) => Promise<T>` | Request input, resolves when responded |
| `status` | `'idle' \| 'pending' \| 'resolved'` | Current request state |
| `requestId` | `string \| null` | Active request ID |

```tsx
interface AskOptions {
  options?: string[];
}
```

Creates request in `db.human`, resolves when external harness calls `db.human.resolve()`.

## useHumanInteractive

Multi-turn interactive sessions.

| Property | Type | Description |
|----------|------|-------------|
| `requestAsync` | `(prompt, options?) => Promise<T>` | Start async session |
| `request` | `(prompt, options?) => void` | Start session (fire-and-forget) |
| `status` | `'idle' \| 'pending' \| 'success' \| 'error'` | Session state |
| `data` | `T \| null` | Session result |
| `sessionId` | `string \| null` | Active session ID |
| `cancel` | `() => void` | Cancel session |
| `reset` | `() => void` | Reset state |

## useRalphCount

Returns current Ralph iteration (0-indexed). Re-renders on change.

```tsx
function useRalphCount(): number
```

Used by `<Claude>` to detect iteration increments:

```tsx
const ralphCount = useRalphCount();
useEffectOnValueChange(ralphCount, () => executeTask());
```

## useSmithers

Access Smithers context.

| Property | Type | Description |
|----------|------|-------------|
| `db` | `SmithersDB` | Database with all modules |
| `reactiveDb` | `ReactiveDatabase` | For custom reactive queries |
| `executionId` | `string \| null` | Current execution |
| `isStopRequested` | `() => boolean` | Check if stop requested |

## Custom Hooks

```tsx
function useWorkflowProgress() {
  const { reactiveDb, executionId } = useSmithers();
  
  const { data: total } = useQueryValue<number>(
    reactiveDb,
    "SELECT COUNT(*) FROM phases WHERE execution_id = ?",
    [executionId ?? ""],
    { skip: !executionId }
  );
  
  return { progress: total ? (completed ?? 0) / total : 0 };
}
```

## Agent Hooks

Use hooks to render custom UIs while keeping the DB as the source of truth.

| Hook | Purpose |
|------|---------|
| [`useClaude`](/api-reference/use-claude) | Claude execution + status |
| [`useCodex`](/api-reference/use-codex) | Codex execution + status |
| [`useAmp`](/api-reference/use-amp) | Amp execution + status |
| [`useSmithersSubagent`](/api-reference/use-smithers-subagent) | Nested Smithers execution + status |
| [`useReview`](/api-reference/use-review) | Review execution + status |

## Related

<CardGroup cols={2}>
  <Card title="Human API" icon="user" href="/api-reference/human" />
  <Card title="Reactive Hooks" icon="bolt" href="/api-reference/reactive-hooks" />
</CardGroup>
