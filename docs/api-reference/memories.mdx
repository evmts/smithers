---
title: Memories API
description: Long-term knowledge storage across workflows
---

# Memories API

```tsx
db.memories.addFact("api-endpoint", "The API is at /api/v2/users", "discovered in auth.ts");
db.memories.addLearning("test-pattern", "Use vitest for unit tests", "package.json");
db.memories.addPreference("commit-style", "Use conventional commits", "project");

const facts = db.memories.list("fact", "project");
const match = db.memories.search("API endpoint", "fact", 5);
```

All methods sync. Uniqueness: `(category, scope, key)`.

## Categories

| Category | Purpose |
|----------|---------|
| `fact` | Discovered facts about codebase |
| `learning` | Lessons from past executions |
| `preference` | User preferences and conventions |
| `context` | Contextual information |
| `skill` | Reusable patterns or procedures |

## Scopes

| Scope | Visibility |
|-------|------------|
| `global` | All projects and sessions |
| `project` | Current project only |
| `session` | Current session only |

## Methods

| Method | Signature | Description |
|--------|-----------|-------------|
| `addFact` | `(key, content, source) => void` | Store discovered fact |
| `addLearning` | `(key, content, source) => void` | Store lesson learned |
| `addPreference` | `(key, content, scope?) => void` | Store preference |
| `add` | `(input: MemoryInput) => void` | Generic add |
| `get` | `(category, key) => Memory \| null` | Retrieve by key |
| `list` | `(category?, scope?, limit?) => Memory[]` | List memories |
| `search` | `(query, category?, limit?) => Memory[]` | Search by content |
| `update` | `(id, updates) => void` | Update memory |
| `delete` | `(id) => void` | Remove memory |
| `stats` | `() => MemoryStats` | Get statistics |

## Memory Type

```tsx
interface Memory {
  id: string;
  category: "fact" | "learning" | "preference" | "context" | "skill";
  key: string;
  content: string;
  confidence: number;
  source?: string;
  scope: "global" | "project" | "session";
  created_at: string;
}
```

## Usage

```tsx
// Load context for agent
const facts = db.memories.list("fact", "project");
const context = facts.map(f => `- ${f.content}`).join("\n");

<Claude systemPrompt={`Known facts:\n${context}`}>
  Work with project knowledge.
</Claude>
```

## Related

<CardGroup cols={2}>
  <Card title="State API" icon="database" href="/api-reference/state" />
  <Card title="Database" icon="server" href="/api-reference/database" />
</CardGroup>
