---
title: Execution API
description: Track workflow executions
---

# Execution API

```tsx
const executionId = db.execution.start("Feature Implementation", "scripts/feature.tsx");
// ... run workflow ...
db.execution.complete(executionId, { summary: "Done" });
```

## Contract

- **Sync:** All methods are synchronous
- **Return shape:** snake_case fields with `Date` timestamps
- **Status:** `pending | running | completed | failed | cancelled`

## Methods

| Method | Signature | Description |
|--------|-----------|-------------|
| `start` | `(name: string, filePath: string, config?: object) => string` | Start new execution |
| `complete` | `(id: string, result?: object) => void` | Mark complete |
| `fail` | `(id: string, error: string) => void` | Mark failed |
| `cancel` | `(id: string) => void` | Cancel execution |
| `current` | `() => Execution \| null` | Get current execution |
| `get` | `(id: string) => Execution \| null` | Get by ID |
| `list` | `(limit?: number) => Execution[]` | List recent executions |
| `findIncomplete` | `() => Execution \| null` | Find incomplete (for resume) |

## Resume Pattern

```tsx
const db = createSmithersDB({ path: ".smithers/data" });

let executionId: string;
const incomplete = db.execution.findIncomplete();

if (incomplete) {
  executionId = incomplete.id;
} else {
  executionId = db.execution.start("New Task", "task.tsx");
}

try {
  // run workflow
  db.execution.complete(executionId);
} catch (err) {
  db.execution.fail(executionId, err.message);
  throw err;
} finally {
  db.close();
}
```

## End Summary

`<End>` writes `end_summary`, `end_reason`, and `exit_code` to the executions table:

```tsx
const row = db.db.queryOne<{ end_summary: string | null }>(
  "SELECT end_summary FROM executions WHERE id = ?",
  [executionId]
);
```

## Types

```tsx
interface Execution {
  id: string;
  name?: string;
  file_path: string;
  status: "pending" | "running" | "completed" | "failed" | "cancelled";
  config: Record<string, any>;
  result?: Record<string, any>;
  error?: string;
  started_at?: Date;
  completed_at?: Date;
  created_at: Date;
  total_iterations: number;
  total_agents: number;
  total_tool_calls: number;
  total_tokens_used: number;
}
```

## Related

- [Agents API](/api-reference/agents)
- [VCS API](/api-reference/vcs)
