---
title: Human API
description: Human-in-the-loop interaction management
---

# Human API

```tsx
const db = createSmithersDB({ path: ".smithers/my-workflow" });

const requestId = db.human.request("confirmation", "Deploy to production?");
db.human.resolve(requestId, "approved", { confirmed: true });
```

All methods sync. Status: `pending | approved | rejected | timeout | cancelled | completed | failed`.

## Methods

| Method | Signature | Description |
|--------|-----------|-------------|
| `request` | `(type, prompt, options?) => string` | Create request, returns ID |
| `resolve` | `(id, status, response?) => void` | Resolve pending request |
| `requestInteractive` | `(prompt, config) => string` | Start multi-turn session |
| `completeInteractive` | `(id, outcome, response, opts?) => void` | Complete session |
| `cancelInteractive` | `(id) => void` | Cancel session |
| `get` | `(id) => HumanInteraction \| null` | Get by ID |
| `listPending` | `(executionId?) => HumanInteraction[]` | List pending requests |

## HumanInteraction Type

```tsx
interface HumanInteraction {
  id: string;
  type: 'confirmation' | 'select' | 'input' | 'text' | 'interactive_session';
  prompt: string;
  options: string[] | null;
  status: 'pending' | 'approved' | 'rejected' | 'timeout' | 'cancelled' | 'completed' | 'failed';
  response: any | null;
  created_at: string;
  resolved_at: string | null;
}
```

## useHuman Hook

```tsx
import { useHuman } from "smithers-orchestrator/hooks";

function DeployWorkflow() {
  const { ask, status } = useHuman();
  
  const deploy = async () => {
    const choice = await ask<string>("Deploy?", { options: ["Yes", "No"] });
    if (choice === "Yes") { /* proceed */ }
  };
}
```

## useHumanInteractive Hook

```tsx
const { requestAsync, status } = useHumanInteractive();

const result = await requestAsync("Review changes.", { captureTranscript: true });
if (result.outcome === "completed") { /* proceed */ }
```

## Integration Pattern

1. Workflow creates request via `db.human.request()` or `useHuman().ask()`
2. UI polls `db.human.listPending()`
3. Human responds
4. UI calls `db.human.resolve()`
5. Promise resolves

## Related

<CardGroup cols={2}>
  <Card title="Human Component" icon="user" href="/components/human" />
  <Card title="Hooks API" icon="hook" href="/api-reference/hooks" />
</CardGroup>
