---
title: Tools API
description: Tool call tracking for agent observability
---

# Tools API

```tsx
const db = createSmithersDB({ path: ".smithers/my-workflow" });

const toolId = db.tools.start(agentId, "Edit", { file: "src/app.ts" });
db.tools.complete(toolId, "File edited successfully", "Modified 15 lines");
```

All methods sync. Returns snake_case fields; `input` is parsed JSON.

## Methods

| Method | Signature | Description |
|--------|-----------|-------------|
| `start` | `(agentId, toolName, input) => string` | Start tracking, returns tool ID |
| `complete` | `(id, output, summary?) => void` | Mark complete with output |
| `fail` | `(id, error) => void` | Mark failed |
| `list` | `(agentId) => ToolCall[]` | List agent's tool calls |
| `getOutput` | `(id) => string \| null` | Get full output |

## ToolCall Type

```tsx
interface ToolCall {
  id: string;
  agent_id: string;
  tool_name: string;
  input: Record<string, any>;
  output_inline: string | null;
  output_summary: string | null;
  error: string | null;
  status: 'pending' | 'running' | 'completed' | 'failed';
  started_at: string | null;
  completed_at: string | null;
  duration_ms: number | null;
}
```

## Output Storage

- **< 1KB**: Stored in `output_inline`
- **â‰¥ 1KB**: Summary in `output_summary`, full output not stored inline

## Usage with Claude

```tsx
<Claude
  onToolCall={(toolName, input) => console.log(`Tool: ${toolName}`, input)}
>
  Edit the file.
</Claude>
```

## Querying

```tsx
const tools = db.tools.list(agentId);
const failures = tools.filter(t => t.status === "failed");
const avgDuration = tools.reduce((s, t) => s + (t.duration_ms ?? 0), 0) / tools.length;
```

## Related

<CardGroup cols={2}>
  <Card title="Agents API" icon="robot" href="/api-reference/agents" />
  <Card title="Claude Component" icon="cube" href="/components/claude" />
</CardGroup>
