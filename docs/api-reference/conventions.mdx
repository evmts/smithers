---
title: API Conventions
description: Shared contracts for the database API
---

# API Conventions

## Sync vs Async

All `db.*` methods are synchronous. Exceptions documented explicitly.

## Casing

- Parameters: **camelCase**
- Return values: **snake_case** (matches DB columns)

## Timestamps

ISO 8601 strings in SQLite. Some modules map to `Date`:

| `Date` objects | ISO strings |
|----------------|-------------|
| `db.execution`, `db.agents`, `db.artifacts`, `db.vcs` | `db.state`, `db.memories`, `db.phases`, `db.steps`, `db.tools`, `db.tasks`, `db.human` |

## Status Vocabulary

Common: `pending`, `running`, `complete`, `failed`, `cancelled`

Module-specific:
- Phases/Steps: `skipped`
- Human: `approved`, `rejected`, `timeout`

## Execution Scope

These require current execution (`db.execution.start()`):
`db.phases`, `db.steps`, `db.agents`, `db.tools`, `db.tasks`, `db.artifacts`, `db.human`, `db.vcs`

## JSON Parsing

Parsed fields (returned as objects):

| Module | Fields |
|--------|--------|
| `db.tools` | `input` |
| `db.agents` | `result_structured`, `stream_summary` |
| `db.artifacts` | `metadata` |
| `db.human` | `options`, `response`, `session_config` |
| `db.vcs` | `files_changed`, `files_modified`, `issues`, `approvals`, `data` |

Raw JSON (caller parses): `db.state.history` (`old_value`, `new_value`)
