---
title: Step
description: Individual step within a workflow phase
---

# Step

Individual task within a Phase. Steps execute sequentially.

```tsx
<Phase name="Implementation">
  <Step name="Create API">
    <Claude>Create the API endpoint.</Claude>
  </Step>
  <Step name="Add Tests">
    <Claude>Write tests.</Claude>
  </Step>
</Phase>
```

## Props

<ParamField path="name" type="string">
  Name of the step for tracking and logging.
</ParamField>

<ParamField path="children" type="ReactNode" required>
  Content to execute within the step.
</ParamField>

### VCS Integration

<ParamField path="snapshotBefore" type="boolean" default="false">
  Create a JJ snapshot before step execution. Useful for rollback if step fails.
  
  <Info>Requires JJ to be configured in the repository. Logs a warning if JJ is unavailable.</Info>
</ParamField>

<ParamField path="snapshotAfter" type="boolean" default="false">
  Create a JJ snapshot after step completes successfully.
</ParamField>

<ParamField path="commitAfter" type="boolean" default="false">
  Create a JJ commit after step completes. The commit is logged to the database via `db.vcs.logCommit()`.
</ParamField>

<ParamField path="commitMessage" type="string">
  Custom commit message when `commitAfter` is true. Defaults to `"Step: {step-name}"`.
</ParamField>

### Callbacks

<ParamField path="onStart" type="() => void">
  Called when the step starts executing.
</ParamField>

<ParamField path="onComplete" type="() => void">
  Called when the step completes successfully.
</ParamField>

<ParamField path="onError" type="(error: Error) => void">
  Called when the step encounters an error.
</ParamField>

## VCS Integration

```tsx
<Step 
  name="Implement Feature"
  snapshotBefore
  commitAfter
  commitMessage="feat: implement auth"
>
  <Claude>Implement the authentication system.</Claude>
</Step>
```

VCS operations fail gracefully. If JJ is unavailable, a warning is logged but the step continues.

## Database Tracking

```tsx
const steps = db.steps.getByExecution(executionId);
// [{ id: "s1", name: "Create API", status: "complete" }, ...]
```

## Related

<CardGroup cols={2}>
  <Card title="Phase" icon="list" href="/components/phase">
    Group steps into phases
  </Card>
  <Card title="SmithersProvider" icon="sitemap" href="/components/smithers-provider">
    Top-level control
  </Card>
</CardGroup>
