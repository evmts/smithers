---
title: Smithers (Subagent)
description: Spawn a new Smithers instance for complex subtasks
---

# Smithers

Spawn a nested Smithers instance. A planner model generates the orchestration script, then an execution model runs it.

```tsx
<Smithers plannerModel="opus" executionModel="sonnet">
  Create a test suite for the auth module.
</Smithers>
```

<Warning>
**Experimental.** API may change.
</Warning>

## Props

<ParamField path="plannerModel" type="'opus' | 'sonnet' | 'haiku'" default="sonnet">
  Model used to plan/generate the orchestration script.

  ```tsx
  <Smithers plannerModel="opus">
    Complex task requiring careful planning.
  </Smithers>
  ```
</ParamField>

<ParamField path="executionModel" type="'opus' | 'sonnet' | 'haiku'" default="sonnet">
  Model used by agents in the generated script.

  ```tsx
  <Smithers plannerModel="opus" executionModel="sonnet">
    Plan with Opus, execute with Sonnet.
  </Smithers>
  ```
</ParamField>

<ParamField path="maxPlanningTurns" type="number" default="5">
  Maximum turns for the planning phase.
</ParamField>

<ParamField path="timeout" type="number">
  Timeout in milliseconds for the entire subagent execution.

  ```tsx
  <Smithers timeout={600000}>  {/* 10 minutes */}
    Time-limited task.
  </Smithers>
  ```
</ParamField>

<ParamField path="context" type="string">
  Additional context to provide to the planner.

  ```tsx
  <Smithers
    context="This is a Next.js project using Prisma ORM"
  >
    Add user profile editing.
  </Smithers>
  ```
</ParamField>

<ParamField path="cwd" type="string">
  Working directory for the subagent.

  ```tsx
  <Smithers cwd="/path/to/subproject">
    Work in the subproject.
  </Smithers>
  ```
</ParamField>

<ParamField path="keepScript" type="boolean" default="false">
  Keep the generated script for debugging.

  ```tsx
  <Smithers keepScript>
    Task (script will be saved).
  </Smithers>
  ```
</ParamField>

<ParamField path="scriptPath" type="string">
  Custom path for the generated script.

  ```tsx
  <Smithers keepScript scriptPath="./debug/generated-workflow.tsx">
    Task with custom script path.
  </Smithers>
  ```
</ParamField>

<ParamField path="reportingEnabled" type="boolean" default="true">
  Enable progress reporting to database.
</ParamField>

### Callbacks

<ParamField path="onFinished" type="(result: SmithersResult) => void">
  Called when the subagent completes.
</ParamField>

<ParamField path="onError" type="(error: Error) => void">
  Called on execution error.
</ParamField>

<ParamField path="onProgress" type="(message: string) => void">
  Called with progress updates.
</ParamField>

<ParamField path="onScriptGenerated" type="(script: string, path: string) => void">
  Called when the planning phase generates the script.

  ```tsx
  <Smithers
    onScriptGenerated={(script, path) => {
      console.log("Generated script:", path);
      console.log(script);
    }}
  >
    Plan and execute.
  </Smithers>
  ```
</ParamField>

## How It Works

```
┌─────────────────────────────────────────────────────────────┐
│  Phase 1: Planning (plannerModel)                           │
│  Claude generates a Smithers orchestration script (TSX)     │
└─────────────────────────────────────────────────────────────┘
                           │
                           ▼
┌─────────────────────────────────────────────────────────────┐
│  Phase 2: Execution (executionModel)                        │
│  The generated script runs with <Claude> components         │
└─────────────────────────────────────────────────────────────┘
```

## With Context

```tsx
<Smithers
  plannerModel="opus"
  executionModel="sonnet"
  context="TypeScript monorepo, Jest tests, PostgreSQL"
  timeout={1800000}
  keepScript
>
  Add user notifications with WebSocket updates.
</Smithers>
```

## Debugging

Use `keepScript` to inspect generated scripts:

```tsx
<Smithers keepScript scriptPath="./debug/script.tsx">
  Complex task.
</Smithers>
```

## Tips

- Use Opus for planning, Sonnet for execution
- Provide `context` for better plans
- Set `timeout` for complex tasks
- Use `keepScript` to debug failures

## Related

<CardGroup cols={3}>
  <Card title="useSmithersSubagent Hook" icon="bolt" href="/api-reference/use-smithers-subagent">
    Custom rendering with the same execution
  </Card>
  <Card title="Claude Component" icon="robot" href="/components/claude">
    Core agent component
  </Card>
  <Card title="SmithersProvider" icon="sitemap" href="/components/smithers-provider">
    Top-level workflow control
  </Card>
</CardGroup>
