---
title: Codex
description: OpenAI Codex CLI agent wrapper
---

# Codex

```tsx
<Codex model="o4-mini" fullAuto>
  Implement user authentication with JWT tokens.
</Codex>
```

Wraps OpenAI Codex CLI for code-focused AI agent tasks. Alternative to Claude with OpenAI's models.

## Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `children` | `ReactNode` | - | Prompt for the agent |
| `model` | `'o3' \| 'o4-mini' \| 'gpt-4o' \| 'gpt-4' \| string` | `'o4-mini'` | Model selection |
| `fullAuto` | `boolean` | `false` | Enable full-auto mode (approves edits, workspace write) |
| `sandboxMode` | `'read-only' \| 'workspace-write' \| 'danger-full-access'` | - | Sandbox mode for commands |
| `approvalPolicy` | `'untrusted' \| 'on-failure' \| 'on-request' \| 'never'` | - | Approval policy |
| `cwd` | `string` | - | Working directory |
| `timeout` | `number` | `300000` | Timeout in ms |
| `schema` | `ZodType` | - | Structured output schema |
| `onFinished` | `(result: AgentResult) => void` | - | Success callback |
| `onError` | `(error: Error) => void` | - | Error callback |

## With Structured Output

```tsx
import { z } from 'zod'

const reviewSchema = z.object({
  decision: z.enum(['approve', 'request_changes']),
  issues: z.array(z.object({
    severity: z.enum(['critical', 'major', 'minor']),
    file: z.string(),
    message: z.string()
  })),
  summary: z.string()
})

<Codex
  model="gpt-4"
  schema={reviewSchema}
  onFinished={(result) => console.log(result.structured)}
>
  Review this pull request
</Codex>
```

## In Fallback Chain

```tsx
<FallbackAgent>
  <Codex model="gpt-4-turbo">{prompt}</Codex>
  <Claude model="sonnet">{prompt}</Claude>
</FallbackAgent>
```

## Authentication

```bash
export OPENAI_API_KEY="sk-..."
```

## Related

<CardGroup cols={2}>
  <Card title="useCodex Hook" icon="bolt" href="/api-reference/use-codex">
    Custom rendering with the same execution
  </Card>
  <Card title="FallbackAgent" icon="shield-halved" href="/components/fallback-agent">
    Multi-provider failover
  </Card>
  <Card title="Claude" icon="robot" href="/components/claude">
    Primary agent
  </Card>
  <Card title="Gemini" icon="stars" href="/components/gemini">
    Google Gemini agent
  </Card>
</CardGroup>
