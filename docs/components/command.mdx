---
title: Command
description: Shell command execution with output capture and task tracking
---

# Command

<Warning>
**Planned Feature** - Not yet implemented.
</Warning>

```tsx
<Command
  cmd="bun"
  args={["run", "build"]}
  onFinished={(result) => console.log(`Done in ${result.durationMs}ms`)}
  onError={(error) => console.error(error.stderr)}
/>
```

## Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `cmd` | `string \| string[]` | required | Command to execute (shell string or array form) |
| `args` | `string[]` | - | Arguments when cmd is string |
| `cwd` | `string` | `process.cwd()` | Working directory |
| `env` | `Record<string, string>` | - | Environment variables (merged with process.env) |
| `timeout` | `number` | `300000` | Timeout in milliseconds |
| `onFinished` | `(result) => void` | - | Success callback |
| `onError` | `(error) => void` | - | Error callback |
| `children` | `(result) => ReactNode` | - | Render function for output handling |

## Result Types

```tsx
interface CommandResult {
  stdout: string
  stderr: string
  exitCode: number
  durationMs: number
  success: boolean
}
```

## With Output Handling

```tsx
<Command cmd="git status --porcelain">
  {(result) => {
    const hasChanges = result.stdout.trim().length > 0
    return hasChanges ? (
      <Phase name="Commit">
        <Step name="commit">
          <Claude>Create commit for changes</Claude>
        </Step>
      </Phase>
    ) : null
  }}
</Command>
```

## Parallel Commands

```tsx
<Parallel>
  <Command cmd="bun run typecheck" />
  <Command cmd="bun run lint" />
  <Command cmd="bun test" />
</Parallel>
```

## Sequential Pipeline

```tsx
<Phase name="CI Pipeline">
  <Step name="Install">
    <Command cmd="bun install --frozen-lockfile" />
  </Step>
  <Step name="Build">
    <Command cmd="bun run build" />
  </Step>
  <Step name="Test">
    <Command cmd="bun test" />
  </Step>
</Phase>
```

## Shell vs Direct Execution

**String form** — shell execution with pipes/redirects:
```tsx
<Command cmd="bun run typecheck && bun run lint" />
```

**Array form** — direct execution, safer for dynamic input:
```tsx
<Command cmd={["git", "commit", "-m", message]} />
```

## Worktree Context

Commands inside `<Worktree>` automatically execute in worktree directory:

```tsx
<Worktree branch="feature">
  <Command cmd="bun test" />  {/* runs in worktree cwd */}
</Worktree>
```

## Related

<CardGroup cols={2}>
  <Card title="Parallel" icon="layer-group" href="/components/parallel">
    Run multiple commands concurrently
  </Card>
  <Card title="Worktree" icon="code-branch" href="/components/worktree">
    Git worktree isolation
  </Card>
</CardGroup>
