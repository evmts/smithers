---
title: Switch
description: Multi-way branching with persisted decision
---

# Switch

<Warning>
**Planned Feature** - Not yet implemented.
</Warning>

```tsx
<Switch id="workflow-mode" value={async () => db.state.get('workflowMode')}>
  <Case match="fast">
    <Phase name="Quick">
      <Step name="quick"><Claude model="haiku">Implement quickly</Claude></Step>
    </Phase>
  </Case>

  <Case match="thorough">
    <Phase name="Research">
      <Step name="research"><Claude model="opus">Deep research</Claude></Step>
    </Phase>
    <Phase name="Implementation">
      <Step name="impl"><Claude>Careful implementation</Claude></Step>
    </Phase>
  </Case>

  <Default>
    <Phase name="Standard">
      <Step name="std"><Claude>Standard process</Claude></Step>
    </Phase>
  </Default>
</Switch>
```

## Props

### Switch

| Prop | Type | Description |
|------|------|-------------|
| `id` | `string` | Stable identifier for resumability |
| `value` | `T \| () => T \| Promise<T>` | Value to match against cases |
| `serialize` | `(value: T) => string` | Serializer for non-primitive values |
| `deserialize` | `(raw: string) => T` | Deserializer for persisted values |
| `children` | `ReactNode` | `<Case>` and `<Default>` components |

### Case

| Prop | Type | Description |
|------|------|-------------|
| `match` | `T \| T[]` | Value(s) to match |
| `children` | `ReactNode` | Content when matched |

### Default

| Prop | Type | Description |
|------|------|-------------|
| `children` | `ReactNode` | Content when no case matches |

## Multiple Match Values

```tsx
<Switch id="priority" value={() => issue.priority}>
  <Case match={["critical", "high"]}>
    <Phase name="Urgent">
      <Step name="urgent"><Claude model="opus">Immediate attention</Claude></Step>
    </Phase>
  </Case>

  <Case match={["low", "trivial"]}>
    <Phase name="Batch">
      <Step name="batch"><Claude model="haiku">Queue for batch</Claude></Step>
    </Phase>
  </Case>

  <Default>
    <Phase name="Triage">
      <Step name="triage"><Claude>Assess issue</Claude></Step>
    </Phase>
  </Default>
</Switch>
```

## State Machine

```tsx
<Switch id="deployment-state" value={() => db.state.get('deploymentState') || 'init'}>
  <Case match="init">
    <Phase name="Initialize"><Step name="init"><Claude>Set up environment</Claude></Step></Phase>
  </Case>
  <Case match="building">
    <Phase name="Build"><Step name="build"><Claude>Build artifacts</Claude></Step></Phase>
  </Case>
  <Case match="testing">
    <Phase name="Test"><Step name="test"><Claude>Run tests</Claude></Step></Phase>
  </Case>
  <Case match="deploying">
    <Phase name="Deploy"><Step name="deploy"><Claude>Deploy to prod</Claude></Step></Phase>
  </Case>
  <Default>
    <Phase name="Recovery"><Step name="recover"><Claude>Handle error</Claude></Step></Phase>
  </Default>
</Switch>
```

## Nested Switches

```tsx
<Switch id="platform" value={process.platform}>
  <Case match="darwin">
    <Switch id="arch" value={process.arch}>
      <Case match="arm64">
        <Phase name="macOS ARM"><Step name="build"><Claude>Build for Apple Silicon</Claude></Step></Phase>
      </Case>
      <Case match="x64">
        <Phase name="macOS Intel"><Step name="build"><Claude>Build for Intel</Claude></Step></Phase>
      </Case>
    </Switch>
  </Case>
  <Case match="linux">
    <Phase name="Linux"><Step name="build"><Claude>Build for Linux</Claude></Step></Phase>
  </Case>
</Switch>
```

## Related

<CardGroup cols={2}>
  <Card title="If" icon="question" href="/components/if">
    Binary conditional
  </Card>
  <Card title="While" icon="rotate" href="/components/while">
    Iterative loops
  </Card>
</CardGroup>
