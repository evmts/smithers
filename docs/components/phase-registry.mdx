---
title: PhaseRegistry
description: Automatic sequential phase state via SQLite
---

# PhaseRegistry

<Note>
`PhaseRegistryProvider` requires `SmithersProvider` contextâ€”it calls `useSmithers()` internally to access the database and reactive state.
</Note>

```tsx
import { PhaseRegistryProvider, Phase, Step } from "smithers-orchestrator";

<PhaseRegistryProvider>
  <Phase name="Research">
    <Step name="research"><Claude>Research the codebase.</Claude></Step>
  </Phase>
  <Phase name="Implement">
    <Step name="implement"><Claude>Implement the feature.</Claude></Step>
  </Phase>
  <Phase name="Test">
    <Step name="test"><Claude>Run tests.</Claude></Step>
  </Phase>
</PhaseRegistryProvider>
```

## usePhaseRegistry

```tsx
const { 
  currentPhaseIndex,
  advancePhase,
  isPhaseActive,
  isPhaseCompleted,
  totalPhases 
} = usePhaseRegistry();
```

| Property | Type | Description |
|----------|------|-------------|
| `registerPhase` | `(name: string) => number` | Register phase, returns index |
| `currentPhaseIndex` | `number` | Active phase index |
| `advancePhase` | `() => void` | Move to next phase |
| `isPhaseActive` | `(index: number) => boolean` | Check if active |
| `isPhaseCompleted` | `(index: number) => boolean` | Check if completed |
| `totalPhases` | `number` | Total registered phases |

## usePhaseIndex

```tsx
const index = usePhaseIndex(name);
const { isPhaseActive } = usePhaseRegistry();
if (!isPhaseActive(index)) return null;
```

## Resume Support

State persists in SQLite. Workflows resume at correct phase after restart.

## Related

<CardGroup cols={2}>
  <Card title="Phase" icon="layer-group" href="/components/phase">
    Group related steps
  </Card>
  <Card title="Step" icon="shoe-prints" href="/components/step">
    Individual steps
  </Card>
</CardGroup>
