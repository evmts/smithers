---
title: Human Component
description: Pause execution and wait for human approval before continuing
---

# Human Component

The `<Human>` component pauses the Ralph Wiggum loop and waits for human approval before continuing execution. This is useful for requiring manual review at critical points in your agent workflow.

## Basic Usage

```tsx
import { Claude, Human } from '@evmts/smithers'

function ReviewAgent({ changes }) {
  const [approved, setApproved] = useState(false)

  if (!approved) {
    return (
      <Human
        message="Review the changes before deploying"
        onApprove={() => setApproved(true)}
      >
        The following changes will be deployed:
        {JSON.stringify(changes, null, 2)}
      </Human>
    )
  }

  return (
    <Claude>
      Deploy the approved changes
    </Claude>
  )
}
```

## Props

<ParamField path="message" type="string">
  Optional message to display to the user. Defaults to "Human approval required to continue".

  ```tsx
  <Human message="Please review this security change">
    Critical security update...
  </Human>
  ```
</ParamField>

<ParamField path="onApprove" type="() => void">
  Callback invoked when the user approves. Typically updates state to continue the workflow.

  ```tsx
  <Human
    onApprove={() => setPhase('deploy')}
  >
    Ready to deploy?
  </Human>
  ```
</ParamField>

<ParamField path="onReject" type="() => void">
  Callback invoked when the user rejects. Can update state to handle rejection.

  ```tsx
  <Human
    onApprove={() => setPhase('deploy')}
    onReject={() => setPhase('cancelled')}
  >
    Ready to deploy?
  </Human>
  ```
</ParamField>

<ParamField path="children" type="JSX.Element">
  Content to show to the user for review. This is passed to the `onHumanPrompt` callback.
</ParamField>

## Handling Approval in Code

When using `executePlan`, provide an `onHumanPrompt` callback to handle approval:

```tsx
import { executePlan } from '@evmts/smithers'

const result = await executePlan(() => <MyAgent />, {
  onHumanPrompt: async (message, content) => {
    // Display the message and content to the user
    console.log(`\n${message}\n`)
    console.log(content)

    // Get user input (example with readline)
    const answer = await askUser('Approve? (y/n): ')
    return answer.toLowerCase() === 'y'
  }
})
```

### Auto-Approval

If no `onHumanPrompt` callback is provided, Human nodes are automatically approved. This is useful for:

- Automated testing
- CI/CD pipelines
- Non-interactive contexts

```tsx
// Auto-approves all Human nodes
const result = await executePlan(() => <MyAgent />)
```

## Use Cases

### Deployment Gates

Require approval before deploying changes:

```tsx
import { createSignal } from 'solid-js'

function DeployAgent(props) {
  const [phase, setPhase] = createSignal('review')

  return () => {
    const p = phase()
    if (p === 'review') {
      return (
        <Human
          message="Review changes before deployment"
          onApprove={() => setPhase('deploy')}
          onReject={() => setPhase('cancelled')}
        >
          Files to be modified:
          {props.changes.map(c => `- ${c.file}: ${c.summary}`).join('\n')}
        </Human>
      )
    }

    if (p === 'deploy') {
      return (
        <Claude tools={[deployTool]}>
          Deploy the approved changes
        </Claude>
      )
    }

    return <div>Deployment cancelled</div>
  }
}
```

### Multi-Stage Reviews

Multiple review points in a workflow:

```tsx
import { createSignal } from 'solid-js'

function MultiReviewAgent() {
  const [step, setStep] = createSignal(1)
  const [plan, setPlan] = createSignal(null)
  const [code, setCode] = createSignal(null)

  return () => {
    const s = step()
    const p = plan()
    const c = code()

    if (s === 1) {
      return (
        <Claude onFinished={(p) => { setPlan(p); setStep(2) }}>
          Create an implementation plan
        </Claude>
      )
    }

    if (s === 2) {
      return (
        <Human
          message="Review the implementation plan"
          onApprove={() => setStep(3)}
          onReject={() => setStep(1)}
        >
          Proposed plan:
          {JSON.stringify(p, null, 2)}
        </Human>
      )
    }

    if (s === 3) {
      return (
        <Claude onFinished={(c) => { setCode(c); setStep(4) }}>
          Implement the plan: {JSON.stringify(p)}
        </Claude>
      )
    }

    if (s === 4) {
      return (
        <Human
          message="Review the implementation"
          onApprove={() => setStep(5)}
          onReject={() => setStep(3)}
        >
          Generated code:
          {c}
        </Human>
      )
    }

    return <div>Complete!</div>
  }
}
```

### Critical Operations

Gate dangerous operations behind human approval:

```tsx
import { createSignal } from 'solid-js'

function DangerousAgent(props) {
  const [confirmed, setConfirmed] = createSignal(false)

  return () => {
    if (!confirmed()) {
      return (
        <Human
          message="This operation is potentially destructive"
          onApprove={() => setConfirmed(true)}
        >
          You are about to: {props.operation}

          This action cannot be undone. Please confirm.
        </Human>
      )
    }

    return (
      <Claude tools={[dangerousTool]}>
        Execute: {props.operation}
      </Claude>
    )
  }
}
```

## Behavior Details

### Approval Flow

1. When a Human node is encountered, execution pauses
2. The `onHumanPrompt` callback is called with message and content
3. If approved (`true`), the `onApprove` callback is called and execution continues
4. If rejected (`false`), the `onReject` callback is called (if provided)
5. If rejected without `onReject`, execution halts

### Same-Node Tracking

The Human component tracks which nodes have been approved to prevent re-prompting:

```tsx
function Agent() {
  return (
    <>
      <Human message="First review">Content 1</Human>
      <Claude onFinished={updateState}>Work</Claude>
    </>
  )
}

// The Human node is only prompted once, even across multiple frames
```

### Without Callbacks

A Human node without `onApprove` will be prompted once and then marked as approved for subsequent frames:

```tsx
<Human message="One-time review">
  This content is shown once for review
</Human>
<Claude>Continue after approval</Claude>
```

## CLI Integration

The CLI handles Human nodes through the terminal:

```bash
smithers run agent.tsx

# Output:
# Review changes before deployment
# Files to be modified:
# - src/index.ts: Add new feature
#
# Approve? (Y/n)
```

Use `--auto-approve` to skip all approval prompts:

```bash
smithers run agent.tsx --auto-approve
```

## Related

<CardGroup cols={2}>
  <Card title="Stop Component" icon="stop" href="/components/stop">
    Halt execution explicitly
  </Card>
  <Card title="executePlan" icon="play" href="/api-reference/execute-plan">
    Configure onHumanPrompt callback
  </Card>
</CardGroup>
