---
title: Phase
description: Group related steps in a workflow phase
---

# Phase

Group related steps into sequential workflow phases.

```tsx
<Phase name="Research">
  <Step name="analyze">
    <Claude>Research the codebase.</Claude>
  </Step>
</Phase>
```

Phases advance when all Steps complete. Only the active phase renders children.

## Props

<ParamField path="name" type="string" required>
  Name of the phase for logging and tracking. Must be unique within the orchestration.

  ```tsx
  <Phase name="Implementation">
    <Step name="code">
      <Claude>Implement the feature.</Claude>
    </Step>
  </Phase>
  ```
</ParamField>

<ParamField path="skipIf" type="() => unknown">
  Skip this phase if condition returns truthy. Takes precedence over automatic state management.

  ```tsx
  const { data: hasTests } = useQueryValue<string>(reactiveDb, "SELECT value FROM state WHERE key = 'has_tests'");

  <Phase name="WriteTests" skipIf={() => hasTests}>
    <Step name="tests">
      <Claude>Write unit tests.</Claude>
    </Step>
  </Phase>
  ```
</ParamField>

<ParamField path="onStart" type="() => void">
  Callback when phase starts (becomes active).

  ```tsx
  <Phase 
    name="Research" 
    onStart={() => console.log("Starting research phase")}
  >
    <Step name="analyze">
      <Claude>Research the codebase.</Claude>
    </Step>
  </Phase>
  ```
</ParamField>

<ParamField path="onComplete" type="() => void">
  Callback when phase completes.

  ```tsx
  <Phase 
    name="Research" 
    onComplete={() => db.state.set('research_done', 'true')}
  >
    <Step name="analyze">
      <Claude>Research the codebase.</Claude>
    </Step>
  </Phase>
  ```
</ParamField>

## Runtime

```
┌─────────────────────────────────────────────────────────────────┐
│ PhaseRegistryProvider (SmithersProvider/Ralph)                  │
│  ┌─────────────────────────────────────────────────────────────┐│
│  │ Phase 1 [active]     → children rendered                   ││
│  │   └─ Step 1.1 [done]                                       ││
│  │   └─ Step 1.2 [running] → when done, Phase 1 advances      ││
│  ├─────────────────────────────────────────────────────────────┤│
│  │ Phase 2 [pending]    → children NOT rendered               ││
│  │   └─ Step 2.1                                              ││
│  ├─────────────────────────────────────────────────────────────┤│
│  │ Phase 3 [pending]    → children NOT rendered               ││
│  │   └─ Step 3.1                                              ││
│  └─────────────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────────┘
```

**Behavior:**
- Phases advance when all Steps complete
- Only the active phase renders children
- Requires `SmithersProvider` context for sequencing
- Use `skipIf` to conditionally skip phases

## Database Tracking

```tsx
const phases = db.phases.list(executionId);
// [{ id: "p1", name: "Research", status: "complete" }, ...]
```

## Related

<CardGroup cols={2}>
  <Card title="Step" icon="shoe-prints" href="/components/step">
    Individual steps within phases
  </Card>
  <Card title="SmithersProvider" icon="cube" href="/components/smithers-provider">
    Orchestration context provider
  </Card>
</CardGroup>
