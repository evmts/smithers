---
title: Ralph
description: Iterative loop component for Smithers workflows
---

# Ralph

```tsx
import { Ralph } from "smithers-orchestrator";
```

Ralph provides iteration in Smithers workflows. It's an alias for [While](/components/while)—use either interchangeably.

<Note>
Without Ralph or While, your workflow runs exactly once. Use Ralph for iterative workflows like fix loops, phased plans, or retry patterns.
</Note>

```tsx
<SmithersProvider db={db} executionId={executionId}>
  <Ralph
    id="fix-loop"
    condition={async () => !(await testsPass())}
    maxIterations={10}
  >
    <Claude>Fix the failing tests</Claude>
  </Ralph>
</SmithersProvider>
```

## Wrapping Phased Workflows

Ralph works with any child components—wrap entire phased workflows for iterative execution:

```tsx
<SmithersProvider db={db} executionId={executionId}>
  <Ralph
    id="implement-loop"
    condition={async () => !(await allTestsPass())}
    maxIterations={5}
  >
    <Phase name="Analyze">
      <Step name="diagnose"><Claude>Analyze test failures</Claude></Step>
    </Phase>
    <Phase name="Fix">
      <Step name="implement"><Claude>Fix the issues</Claude></Step>
      <Step name="verify"><Claude>Run tests again</Claude></Step>
    </Phase>
  </Ralph>
</SmithersProvider>
```

## Props

Same as [While](/components/while):

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `id` | `string` | required | Stable identifier for resumability |
| `condition` | `() => boolean \| Promise<boolean>` | required | Loop continues while true |
| `maxIterations` | `number` | `10` | Maximum iterations to prevent infinite loops |
| `children` | `ReactNode` | required | Components executed each iteration |
| `onIteration` | `(iteration: number) => void` | - | Callback at start of each iteration |
| `onComplete` | `(iterations, reason) => void` | - | Callback when loop completes (`reason: 'condition' | 'max'`) |

## Accessing Iteration Count

```tsx
import { useRalphIteration } from "smithers-orchestrator";

function MyComponent() {
  const ctx = useRalphIteration();
  return <div>Iteration: {ctx?.iteration}</div>;
}
```

## Related

<CardGroup cols={2}>
  <Card title="While" icon="rotate" href="/components/while">
    The underlying component
  </Card>
  <Card title="Ralph Wiggum Loop" icon="sitemap" href="/concepts/ralph-wiggum-loop">
    Execution loop concept
  </Card>
</CardGroup>
