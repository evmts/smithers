---
title: FallbackAgent
description: Multi-provider failover with automatic retry
---

<Warning>
**Planned Feature** - Not yet implemented.
</Warning>

# FallbackAgent

```tsx
<FallbackAgent>
  <Codex>{prompt}</Codex>
  <Claude model="sonnet">{prompt}</Claude>
  <Gemini model="gemini-2.5-pro">{prompt}</Gemini>
</FallbackAgent>
```

Tries agent children in priority order, falling back to next on error or timeout.

## Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `children` | `ReactNode` | — | Agent components in priority order |
| `maxRetries` | `number` | `2` | Retries per agent before failover |
| `onFallback` | `(from, to, error) => void` | — | Called when falling back |
| `onAllFailed` | `(errors: Error[]) => void` | — | Called when all agents fail |
| `retryStrategy` | `'exponential' \| 'linear' \| 'none'` | `'exponential'` | Retry delay strategy |
| `retryDelayMs` | `number` | `1000` | Initial retry delay |

## With Retry Configuration

```tsx
<FallbackAgent
  maxRetries={3}
  retryStrategy="exponential"
  retryDelayMs={2000}
  onFallback={(from, to, error) => {
    console.warn(`Falling back: ${from} → ${to}`)
  }}
>
  <Claude model="opus">{prompt}</Claude>
  <Claude model="sonnet">{prompt}</Claude>
  <Claude model="haiku">{prompt}</Claude>
</FallbackAgent>
```

Retry sequence: Opus fails → retry (2s) → retry (4s) → retry (8s) → fallback to Sonnet

## Cost Optimization

```tsx
<FallbackAgent maxRetries={1}>
  <Claude model="haiku">{prompt}</Claude>   {/* Cheap first */}
  <Claude model="sonnet">{prompt}</Claude>  {/* Medium */}
  <Claude model="opus">{prompt}</Claude>    {/* Expensive last */}
</FallbackAgent>
```

## Cross-Provider Redundancy

```tsx
<FallbackAgent
  onAllFailed={(errors) => alerting.sendCritical('All providers down')}
>
  <Claude>{prompt}</Claude>
  <Codex>{prompt}</Codex>
  <Gemini>{prompt}</Gemini>
</FallbackAgent>
```

## Sequential vs Parallel

```
FallbackAgent: A fails → try B → B fails → try C
Parallel:      A, B, C all run simultaneously
```

FallbackAgent optimizes for cost and resilience.

## Related

<CardGroup cols={2}>
  <Card title="Claude" icon="robot" href="/components/claude">
    Primary agent
  </Card>
  <Card title="Codex" icon="code" href="/components/codex">
    OpenAI agent
  </Card>
  <Card title="Gemini" icon="stars" href="/components/gemini">
    Google Gemini agent
  </Card>
</CardGroup>
