---
title: JJ
description: Jujutsu version control components
---

# JJ

```tsx
import { Snapshot, Commit } from "smithers-orchestrator/components/JJ";

<Phase name="Feature">
  <Snapshot message="Before implementation" />
  <Claude>Implement the feature.</Claude>
  <Commit autoDescribe notes="Smithers automated" />
</Phase>
```

Requires [Jujutsu](https://github.com/martinvonz/jj): `brew install jj`

## Components

### Snapshot

```tsx
<Snapshot message="Before risky refactoring" />
```

| Prop | Type | Description |
|------|------|-------------|
| `id` | `string?` | Stable identifier for resumability |
| `message` | `string?` | Snapshot description |
| `children` | `ReactNode?` | Optional child content |

### Commit

```tsx
<Commit message="feat: Add auth" />
<Commit autoDescribe />
<Commit autoDescribe notes="User prompt: Add feature" />
```

| Prop | Type | Description |
|------|------|-------------|
| `id` | `string?` | Stable identifier for resumability |
| `message` | `string?` | Commit message (defaults to "Commit by Smithers") |
| `autoDescribe` | `boolean?` | Generate simple line count message from diff (does NOT use Claude) |
| `notes` | `string?` | Git notes to attach |
| `children` | `ReactNode?` | Optional child content |

### Describe

Auto-generates commit message from diff.

```tsx
<Describe />
<Describe useAgent="claude" />
<Describe useAgent="claude" template="conventional-commits" />
```

| Prop | Type | Description |
|------|------|-------------|
| `id` | `string?` | Optional operation ID for tracking |
| `useAgent` | `'claude'?` | Placeholder prop - does NOT actually use Claude (not yet implemented) |
| `template` | `string?` | Template format - ðŸš§ not yet implemented |
| `children` | `ReactNode?` | Optional child content |

### Status

Checks JJ working copy status and invokes callbacks based on dirty/clean state.

```tsx
<Status
  onDirty={(status) => console.log('Modified:', status.modified)}
  onClean={() => console.log('Working copy is clean')}
/>
```

| Prop | Type | Description |
|------|------|-------------|
| `id` | `string?` | Optional unique identifier |
| `onDirty` | `(status: { modified: string[]; added: string[]; deleted: string[] }) => void?` | Called when working copy has changes |
| `onClean` | `() => void?` | Called when working copy is clean |
| `children` | `ReactNode?` | Optional child content |

### Rebase

```tsx
<Rebase source="feature" destination="main" />
```

| Prop | Type | Description |
|------|------|-------------|
| `id` | `string?` | Stable identifier for resumability |
| `destination` | `string?` | Target revision to rebase onto |
| `source` | `string?` | Source revision to rebase |
| `onConflict` | `(conflicts: string[]) => void?` | Called when rebase has conflicts |
| `children` | `ReactNode?` | Optional child content |

## Database Logging

All operations logged automatically:

```tsx
const snapshots = db.vcs.getSnapshots(10);
const commits = db.vcs.getCommits(10);
```

## Related

<CardGroup cols={2}>
  <Card title="Git Components" icon="git" href="/components/commit">
    Git version control
  </Card>
  <Card title="VCS Guide" icon="code-branch" href="/guides/vcs-integration">
    VCS integration
  </Card>
</CardGroup>
