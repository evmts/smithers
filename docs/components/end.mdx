---
title: End
description: Explicitly terminate orchestration with structured summary
---

# End

```tsx
<End
  summary={{
    status: "success",
    message: "PR #123 review completed",
    data: { approved: true },
  }}
/>
```

## Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `summary` | `EndSummary \| () => EndSummary` | required | Structured run summary |
| `exitCode` | `number` | `0` or `1` | Process exit code |
| `reason` | `string` | from status | Optional reason string |

### EndSummary

```tsx
interface EndSummary {
  status: "success" | "failure" | "partial";
  message: string;
  data?: Record<string, unknown>;
  metrics?: {
    duration_ms?: number;
    iterations?: number;
    agents_run?: number;
    tokens_used?: { input: number; output: number };
  };
}
```

## Dynamic Summary

```tsx
<End
  summary={() => {
    const review = db.state.get("lastReview");
    return {
      status: review?.approved ? "success" : "failure",
      message: review?.approved
        ? "PR approved"
        : `${review?.issues?.length ?? 0} issues found`,
      data: { approved: review?.approved, issues: review?.issues },
    };
  }}
/>
```

## With Metrics

```tsx
<End
  summary={{
    status: "success",
    message: "Feature implemented",
    metrics: {
      duration_ms: 45000,
      iterations: 3,
      agents_run: 7,
      tokens_used: { input: 15000, output: 8000 },
    },
  }}
/>
```

## Database Storage

Summary stored in `executions` table:

```tsx
const row = db.db.queryOne<{ end_summary: string }>(
  "SELECT end_summary FROM executions WHERE id = ?",
  [executionId]
);
const summary = JSON.parse(row.end_summary);
```

## Related

<CardGroup cols={2}>
  <Card title="Stop" icon="stop" href="/components/stop">
    Stop without summary
  </Card>
  <Card title="SmithersProvider" icon="sitemap" href="/components/smithers-provider">
    Orchestration context
  </Card>
</CardGroup>
