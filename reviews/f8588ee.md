# Review: f8588ee

**Commit:** f8588ee20a5bcf005be176d941ad8412fc838fc8
**Message:** ✨ feat: integrate MCP servers with Claude executor
**Date:** 2026-01-05 23:56:34 UTC

## Feedback

- `src/core/execute.ts`: `prepareTools()` is only used for real Claude calls; in mock mode you still call `executeMock(node)` without passing MCP-prepared tools. This makes MCP tools unavailable in tests or any mock runs. Consider wiring `preparedTools` into mock execution or extending `executeMock` to accept tools.
- `src/core/execute.ts`: `MCPManager` is shared across all nodes and `getAllTools()` returns tools from every previously connected server. A node that does *not* declare `mcpServers` can still see tools from earlier nodes, which is likely unintended. Scope tools to the current node’s servers (or disconnect/clear between nodes).
- `src/core/execute.ts`: when inline tools and MCP tools share a `name`, you push both; `convertTools/buildToolMap` likely picks the last one, causing silent shadowing. Consider de-duplicating and/or warning on collisions.
