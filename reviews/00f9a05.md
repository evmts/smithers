# Review: 00f9a05

**Commit:** 00f9a05313aff92246fbfc20768aedb6bf6ead2a
**Message:** fix: address TUI robustness issues from Codex review
**Date:** 2026-01-07 00:23:22 UTC

## Feedback

- Side effects during render: `setTimeout(() => setView('tree'), 0)` runs inside render, which can schedule multiple timeouts and trigger state updates after unmount. Move this to a `useEffect` that watches `[view, selectedNode]` and clear any pending timeout. `src/tui/TuiRoot.tsx`
- Unbounded scroll offset: `detailScrollOffset` can grow indefinitely; with large outputs this makes `split`/`slice` work harder and the UI can appear “stuck” if offset exceeds line count. Clamp the offset to `[0, maxLines-1]` when incrementing or in `applyScrollOffset`. `src/tui/TuiRoot.tsx` and `src/tui/AgentPanel.tsx`
