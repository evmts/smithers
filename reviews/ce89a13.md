# Review: ce89a13

**Commit:** ce89a137a428678ff154fd3dae9c6db11368932f
**Message:** ✨ feat(core): add nested execution utilities
**Date:** 2026-01-06 01:29:23 UTC

## Feedback

- `src/core/nested-execution.ts`: `serializePlanWithPaths` and `getTextContent` lose child/text ordering. Any plan node with mixed text + JSX will be serialized with all text collapsed and moved before children, which changes meaning. Fix by iterating `node.children` in order and emitting TEXT nodes inline, rather than aggregating them up front.
- `src/core/nested-execution.ts`: `separatePromptAndPlan` trims the prompt and concatenates text nodes with no delimiter. If authors rely on leading/trailing whitespace or text separated by JSX nodes, the prompt changes. Consider preserving original whitespace or only trimming if you’re sure it’s safe.
