# Review: 0528701

**Commit:** 0528701b7118e5bb5ac91d506eb859c60108a327
**Message:** fix: implement async rendering with React 19 reconciler
**Date:** 2026-01-05 23:02:16 UTC

## Feedback

- Incorrect execution-state keying: `saveExecutionState`/`restoreExecutionState` use `contentHash` as the map key, so multiple identical `claude`/`subagent` nodes collide and later restores mark all matching nodes as already executed, skipping work. Use a stable per-node identity (e.g., path index or an assigned id) as the key and store `contentHash` inside the state instead. `src/core/execute.ts:328`, `src/core/execute.ts:347`
- Potential crash hashing props: `computeContentHash` calls `JSON.stringify` on arbitrary prop values; this throws for `BigInt`/circular refs and silently drops symbols/functions, which can break the loop at runtime. Use a safe/stable serializer with try/catch and fall back to string tags for unsupported types. `src/core/execute.ts:401`
