# Review: d966546

**Commit:** d9665464f631cca730b6bd0b8fcb9a7d5572a0b5
**Message:** fix: implement async rendering with React 19 reconciler
**Date:** 2026-01-05 22:10:45 UTC

## Feedback

- `src/core/execute.ts:103-128` mutates `node.props.onFinished` in-place and doesn’t restore it; if props are unchanged in subsequent renders, React won’t reapply the original callback, so wrappers stack every frame and can grow unbounded. Track state changes without mutating props (e.g., local map or wrapper restore after `executeNode`).
- `src/reconciler/index.ts:100-106` and `src/core/execute.ts:167-175` rely on `setImmediate`, which is undefined in browsers/Bun and will throw at runtime; add a fallback (e.g., `queueMicrotask`/`Promise.resolve().then` and `setTimeout(0)`).
- `debug-state.tsx:29-30` calls `root.render` without `await`; `render` now returns `Promise<PluNode>`, so `serialize(tree1)` will break.
