import { Claude, Phase, Step, Constraints, OutputFormat } from 'plue'
import { fileSystem, grep } from './tools'

# Code Review Agent

<Claude tools={[fileSystem, grep]}>
  <Constraints>
    - Focus on bugs, security issues, and performance problems
    - Provide specific line numbers
    - Suggest concrete fixes
  </Constraints>

  <Phase name="review">
    <Step>Read the changed files</Step>
    <Step>Identify issues by category</Step>
    <Step>Suggest fixes for each issue</Step>
  </Phase>

  <OutputFormat>
    Return a JSON object:
    ```json
    {
      "issues": [
        {
          "file": "string",
          "line": "number",
          "severity": "low | medium | high | critical",
          "category": "bug | security | performance | style",
          "description": "string",
          "suggestion": "string"
        }
      ],
      "summary": "string"
    }
    ```
  </OutputFormat>
</Claude>
