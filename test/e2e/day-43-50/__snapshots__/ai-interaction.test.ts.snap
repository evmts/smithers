// TUI Test Snapshot v1

exports[`Day 43: Send to AI › submit message shows loading indicator then response | 1`] = String.raw`
╭────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Smithers v0.1.0 │   demo-mode                                                                                          │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│  │ trigger error                                                                                                       │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│  │ hello                                                                                                               │
│                                                                                                                        │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│  │ write a very long detailed response about programming                                                               │
│                                                                                                                        │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                                                                                                        │
│  ╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮  │
│  │>                                                                                                                 │  │
│  │                                                                                                                  │  │
│  ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯  │
│                                                                                                                        │
│ ? help │   Esc interrupt │   Ctrl+C clear │   / commands │                                                             │
╰────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
`;

exports[`Day 43: Send to AI › submit message shows loading indicator then response | 1 1`] = String.raw`
╭────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Smithers v0.1.0 │   demo-mode                                                                                          │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│  │ hello                                                                                                               │
│                                                                                                                        │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│  │ write a very long detailed response about programming                                                               │
│                                                                                                                        │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│  │ hello                                                                                                               │
│                                                                                                                        │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│                                                                                                                        │
│  ╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮  │
│  │>                                                                                                                 │  │
│  │                                                                                                                  │  │
│  ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯  │
│                                                                                                                        │
│ ? help │   Esc interrupt │   Ctrl+C clear │   / commands │                                                             │
╰────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
`;

exports[`Day 44: Cancel AI Request › escape during loading cancels request | 1`] = String.raw`
╭────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Smithers v0.1.0 │   demo-mode                                                                                          │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│  │ hello                                                                                                               │
│                                                                                                                        │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│  │ write a very long detailed response about programming                                                               │
│                                                                                                                        │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│  │ hello                                                                                                               │
│                                                                                                                        │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│                                                                                                                        │
│  ╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮  │
│  │> ell me a l                                                                                                      │  │
│  │                                                                                                                  │  │
│  ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯  │
│                                                                                                                        │
│ ? help │   Esc interrupt │   Ctrl+C clear │   / commands │                                                             │
╰────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
`;

exports[`Day 45: Queue While Busy › messages queued during loading | 1`] = String.raw`
╭────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Smithers v0.1.0 │   demo-mode                                                                                          │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│  │ hello                                                                                                               │
│                                                                                                                        │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│  │ write a very long detailed response about programming                                                               │
│                                                                                                                        │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│  │ hello                                                                                                               │
│                                                                                                                        │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                                                                                                        │
│  ╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮  │
│  │>                                                                                                                 │  │
│  │                                                                                                                  │  │
│  ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯  │
│                                                                                                                        │
│ ? help │   Esc interrupt │   Ctrl+C clear │   / commands │                                                             │
╰────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
`;

exports[`Day 45: Queue While Busy › messages queued during loading | 1 1`] = String.raw`
╭────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│???:?:?: 0x10089799f in _sqlite.Db.exec__anon_23131 (???)                                                               │
│???:?:?: 0x100897c2b in _db.Database(sqlite.Db).addMessageEx (???)                                                      │
│???:?:?: 0x100897e23 in _db.Database(sqlite.Db).addMessage (???)                                                        │
│???:?:?: 0x1008c75eb in _keys.handler.KeyHandler(rendering.renderer.Renderer(rendering.renderer.VaxisBackend),loading.Lo│
│adingState(clock.Clock(clock.StdClock),agent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistryFactory)),db.│
│Database(sqlite.Db),event_loop.EventLoop(Vaxis,tty.PosixTty,event.Event(rendering.renderer.Renderer(rendering.renderer.V│
│axisBackend))),agent_thread.AgentThread(agent.loop.AgentLoop(agent.anthropic_provider.AnthropicStreamingProvider,loading│
│.LoadingState(clock.Clock(clock.StdClock),agent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistryFactory)),│
│agent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistryFactory),db.Database(sqlite.Db)),loading.LoadingStat│
│e(clock.Clock(clock.StdClock),agent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistryFactory)),db.Database(│
│sqlite.Db),components.chat_history.ChatHistory(rendering.renderer.Renderer(rendering.renderer.VaxisBackend)))).handleKey│
│ (???)                                                                                                                  │
│???:?:?: 0x1008d909f in _app.App(db.Database(sqlite.Db),event_loop.EventLoop(Vaxis,tty.PosixTty,event.Event(rendering.re│
│nderer.Renderer(rendering.renderer.VaxisBackend))),rendering.renderer.Renderer(rendering.renderer.VaxisBackend),agent.an│
│thropic_provider.AnthropicStreamingProvider,environment.Environment(environment.PosixEnv),clock.Clock(clock.StdClock),ag│
│ent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistryFactory)).run (???)                                   │
│???:?:?: 0x1007fffff in _main.panic_handler (???)                                                                       │
│???:?:?: 0x1007fc123 in _builtin.panic__struct_2538.panic (???)                                                         │
│???:?:?: 0x100858453 in _Thread.Mutex.lock (???)                                                                        │
│???:?:?: 0x10090e327 in _agent_thread.AgentThread(agent.loop.AgentLoop(agent.anthropic_provider.AnthropicStreamingProvid│
│er,loading.LoadingState(clock.Clock(clock.StdClock),agent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistry│
│Factory)),agent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistryFactory),db.Database(sqlite.Db)),loading.L│
│oadingState(clock.Clock(clock.StdClock),agent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistryFactory)),db│
│.Database(sqlite.Db),components.chat_history.ChatHistory(rendering.renderer.Renderer(rendering.renderer.VaxisBackend))).│
│stop (???)                                                                                                              │
│???:?:?: 0x1008f7d77 in _agent_thread.AgentThread(agent.loop.AgentLoop(agent.anthropic_provider.AnthropicStreamingProvid│
│er,loading.LoadingState(clock.Clock(clock.StdClock),agent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistry│
│Factory)),agent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistryFactory),db.Database(sqlite.Db)),loading.L│
│oadingState(clock.Clock(clock.StdClock),agent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistryFactory)),db│
│.Database(sqlite.Db),components.chat_history.ChatHistory(rendering.renderer.Renderer(rendering.renderer.VaxisBackend))).│
│deinit (???)                                                                                                            │
│???:?:?: 0x1008dbaeb in _app.App(db.Database(sqlite.Db),event_loop.EventLoop(Vaxis,tty.PosixTty,event.Event(rendering.re│
│nderer.Renderer(rendering.renderer.VaxisBackend))),rendering.renderer.Renderer(rendering.renderer.VaxisBackend),agent.an│
│thropic_provider.AnthropicStreamingProvider,environment.Environment(environment.PosixEnv),clock.Clock(clock.StdClock),ag│
│ent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistryFactory)).deinit (???)                                │
│???:?:?: 0x1008db567 in _main.main (???)                                                                                │
│???:?:?: 0x1008dbdab in _main (???)                                                                                     │
│???:?:?: 0x1982a8273 in ??? (???)                                                                                       │
│???:?:?: 0x15787fffffffffff in ??? (???)                                                                                │
│                                                                                                                        │
╰────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
`;

exports[`Day 46: Streaming Response › response streams incrementally | 1`] = String.raw`
╭────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Smithers v0.1.0 │   demo-mode                                                                                          │
│  │ hello                                                                                                               │
│                                                                                                                        │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│  │ write a very long detailed response about programming                                                               │
│                                                                                                                        │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│  │ hello                                                                                                               │
│                                                                                                                        │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                                                                                                        │
│  ╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮  │
│  │> he                                                                                                              │  │
│  │                                                                                                                  │  │
│  ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯  │
│                                                                                                                        │
│ ? help │   Esc interrupt │   Ctrl+C clear │   / commands │                                                             │
╰────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
`;

exports[`Day 46: Streaming Response › response streams incrementally | 1 1`] = String.raw`
╭────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Smithers v0.1.0 │   demo-mode                                                                                          │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│  │ write a very long detailed response about programming                                                               │
│                                                                                                                        │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│  │ hello                                                                                                               │
│                                                                                                                        │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│  │ hello                                                                                                               │
│                                                                                                                        │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│                                                                                                                        │
│  ╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮  │
│  │>                                                                                                                 │  │
│  │                                                                                                                  │  │
│  ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯  │
│                                                                                                                        │
│ ? help │   Esc interrupt │   Ctrl+C clear │   / commands │                                                             │
╰────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
`;

exports[`Day 46: Streaming Response › response streams incrementally | 1 2`] = String.raw`
╭────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Smithers v0.1.0 │   demo-mode                                                                                          │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│  │ write a very long detailed response about programming                                                               │
│                                                                                                                        │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│  │ hello                                                                                                               │
│                                                                                                                        │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│  │ hello                                                                                                               │
│                                                                                                                        │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│                                                                                                                        │
│  ╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮  │
│  │>                                                                                                                 │  │
│  │                                                                                                                  │  │
│  ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯  │
│                                                                                                                        │
│ ? help │   Esc interrupt │   Ctrl+C clear │   / commands │                                                             │
╰────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
`;

exports[`Day 47: Tool Call Display › tool calls are shown in UI | 1`] = String.raw`
╭────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│???:?:?: 0x102e9399f in _sqlite.Db.exec__anon_23131 (???)                                                               │
│???:?:?: 0x102e93c2b in _db.Database(sqlite.Db).addMessageEx (???)                                                      │
│???:?:?: 0x102e93e23 in _db.Database(sqlite.Db).addMessage (???)                                                        │
│???:?:?: 0x102ec3277 in _keys.handler.KeyHandler(rendering.renderer.Renderer(rendering.renderer.VaxisBackend),loading.Lo│
│adingState(clock.Clock(clock.StdClock),agent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistryFactory)),db.│
│Database(sqlite.Db),event_loop.EventLoop(Vaxis,tty.PosixTty,event.Event(rendering.renderer.Renderer(rendering.renderer.V│
│axisBackend))),agent_thread.AgentThread(agent.loop.AgentLoop(agent.anthropic_provider.AnthropicStreamingProvider,loading│
│.LoadingState(clock.Clock(clock.StdClock),agent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistryFactory)),│
│agent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistryFactory),db.Database(sqlite.Db)),loading.LoadingStat│
│e(clock.Clock(clock.StdClock),agent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistryFactory)),db.Database(│
│sqlite.Db),components.chat_history.ChatHistory(rendering.renderer.Renderer(rendering.renderer.VaxisBackend)))).handleKey│
│ (???)                                                                                                                  │
│???:?:?: 0x102ed509f in _app.App(db.Database(sqlite.Db),event_loop.EventLoop(Vaxis,tty.PosixTty,event.Event(rendering.re│
│nderer.Renderer(rendering.renderer.VaxisBackend))),rendering.renderer.Renderer(rendering.renderer.VaxisBackend),agent.an│
│thropic_provider.AnthropicStreamingProvider,environment.Environment(environment.PosixEnv),clock.Clock(clock.StdClock),ag│
│ent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistryFactory)).run (???)                                   │
│???:?:?: 0x102dfbfff in _main.panic_handler (???)                                                                       │
│???:?:?: 0x102df8123 in _builtin.panic__struct_2538.panic (???)                                                         │
│???:?:?: 0x102e54453 in _Thread.Mutex.lock (???)                                                                        │
│???:?:?: 0x102f0a327 in _agent_thread.AgentThread(agent.loop.AgentLoop(agent.anthropic_provider.AnthropicStreamingProvid│
│er,loading.LoadingState(clock.Clock(clock.StdClock),agent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistry│
│Factory)),agent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistryFactory),db.Database(sqlite.Db)),loading.L│
│oadingState(clock.Clock(clock.StdClock),agent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistryFactory)),db│
│.Database(sqlite.Db),components.chat_history.ChatHistory(rendering.renderer.Renderer(rendering.renderer.VaxisBackend))).│
│stop (???)                                                                                                              │
│???:?:?: 0x102ef3d77 in _agent_thread.AgentThread(agent.loop.AgentLoop(agent.anthropic_provider.AnthropicStreamingProvid│
│er,loading.LoadingState(clock.Clock(clock.StdClock),agent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistry│
│Factory)),agent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistryFactory),db.Database(sqlite.Db)),loading.L│
│oadingState(clock.Clock(clock.StdClock),agent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistryFactory)),db│
│.Database(sqlite.Db),components.chat_history.ChatHistory(rendering.renderer.Renderer(rendering.renderer.VaxisBackend))).│
│deinit (???)                                                                                                            │
│???:?:?: 0x102ed7aeb in _app.App(db.Database(sqlite.Db),event_loop.EventLoop(Vaxis,tty.PosixTty,event.Event(rendering.re│
│nderer.Renderer(rendering.renderer.VaxisBackend))),rendering.renderer.Renderer(rendering.renderer.VaxisBackend),agent.an│
│thropic_provider.AnthropicStreamingProvider,environment.Environment(environment.PosixEnv),clock.Clock(clock.StdClock),ag│
│ent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistryFactory)).deinit (???)                                │
│???:?:?: 0x102ed7567 in _main.main (???)                                                                                │
│???:?:?: 0x102ed7dab in _main (???)                                                                                     │
│???:?:?: 0x1982a8273 in ??? (???)                                                                                       │
│???:?:?: 0x4a33ffffffffffff in ??? (???)                                                                                │
│                                                                                                                        │
╰────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
`;

exports[`Day 48: Error Handling › API errors display gracefully | 1`] = String.raw`
╭────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Smithers v0.1.0 │   demo-mode                                                                                          │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│  │ hello                                                                                                               │
│                                                                                                                        │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│  │ first message                                                                                                       │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│  │ こ ん に ち は                                                                                                           │
│                                                                                                                        │
│  │ trigger error                                                                                                       │
│                                                                                                                        │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│                                                                                                                        │
│  ╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮  │
│  │>                                                                                                                 │  │
│  │                                                                                                                  │  │
│  ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯  │
│                                                                                                                        │
│ ? help │   Esc interrupt │   Ctrl+C clear │   / commands │                                                             │
╰────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
`;

exports[`Day 49: Demo Mode › operates in demo mode without API key | 1`] = String.raw`
╭────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│???:?:?: 0x10515799f in _sqlite.Db.exec__anon_23131 (???)                                                               │
│???:?:?: 0x105157c2b in _db.Database(sqlite.Db).addMessageEx (???)                                                      │
│???:?:?: 0x105157e23 in _db.Database(sqlite.Db).addMessage (???)                                                        │
│???:?:?: 0x105187277 in _keys.handler.KeyHandler(rendering.renderer.Renderer(rendering.renderer.VaxisBackend),loading.Lo│
│adingState(clock.Clock(clock.StdClock),agent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistryFactory)),db.│
│Database(sqlite.Db),event_loop.EventLoop(Vaxis,tty.PosixTty,event.Event(rendering.renderer.Renderer(rendering.renderer.V│
│axisBackend))),agent_thread.AgentThread(agent.loop.AgentLoop(agent.anthropic_provider.AnthropicStreamingProvider,loading│
│.LoadingState(clock.Clock(clock.StdClock),agent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistryFactory)),│
│agent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistryFactory),db.Database(sqlite.Db)),loading.LoadingStat│
│e(clock.Clock(clock.StdClock),agent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistryFactory)),db.Database(│
│sqlite.Db),components.chat_history.ChatHistory(rendering.renderer.Renderer(rendering.renderer.VaxisBackend)))).handleKey│
│ (???)                                                                                                                  │
│???:?:?: 0x10519909f in _app.App(db.Database(sqlite.Db),event_loop.EventLoop(Vaxis,tty.PosixTty,event.Event(rendering.re│
│nderer.Renderer(rendering.renderer.VaxisBackend))),rendering.renderer.Renderer(rendering.renderer.VaxisBackend),agent.an│
│thropic_provider.AnthropicStreamingProvider,environment.Environment(environment.PosixEnv),clock.Clock(clock.StdClock),ag│
│ent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistryFactory)).run (???)                                   │
│???:?:?: 0x1050bffff in _main.panic_handler (???)                                                                       │
│???:?:?: 0x1050bc123 in _builtin.panic__struct_2538.panic (???)                                                         │
│???:?:?: 0x105118453 in _Thread.Mutex.lock (???)                                                                        │
│???:?:?: 0x1051ce327 in _agent_thread.AgentThread(agent.loop.AgentLoop(agent.anthropic_provider.AnthropicStreamingProvid│
│er,loading.LoadingState(clock.Clock(clock.StdClock),agent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistry│
│Factory)),agent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistryFactory),db.Database(sqlite.Db)),loading.L│
│oadingState(clock.Clock(clock.StdClock),agent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistryFactory)),db│
│.Database(sqlite.Db),components.chat_history.ChatHistory(rendering.renderer.Renderer(rendering.renderer.VaxisBackend))).│
│stop (???)                                                                                                              │
│???:?:?: 0x1051b7d77 in _agent_thread.AgentThread(agent.loop.AgentLoop(agent.anthropic_provider.AnthropicStreamingProvid│
│er,loading.LoadingState(clock.Clock(clock.StdClock),agent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistry│
│Factory)),agent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistryFactory),db.Database(sqlite.Db)),loading.L│
│oadingState(clock.Clock(clock.StdClock),agent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistryFactory)),db│
│.Database(sqlite.Db),components.chat_history.ChatHistory(rendering.renderer.Renderer(rendering.renderer.VaxisBackend))).│
│deinit (???)                                                                                                            │
│???:?:?: 0x10519baeb in _app.App(db.Database(sqlite.Db),event_loop.EventLoop(Vaxis,tty.PosixTty,event.Event(rendering.re│
│nderer.Renderer(rendering.renderer.VaxisBackend))),rendering.renderer.Renderer(rendering.renderer.VaxisBackend),agent.an│
│thropic_provider.AnthropicStreamingProvider,environment.Environment(environment.PosixEnv),clock.Clock(clock.StdClock),ag│
│ent.tool_executor.ToolExecutor(agent.tool_executor.BuiltinRegistryFactory)).deinit (???)                                │
│???:?:?: 0x10519b567 in _main.main (???)                                                                                │
│???:?:?: 0x10519bdab in _main (???)                                                                                     │
│???:?:?: 0x1982a8273 in ??? (???)                                                                                       │
│???:?:?: 0x375effffffffffff in ??? (???)                                                                                │
│                                                                                                                        │
╰────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
`;

exports[`Day 50: Long Response Auto-Scroll › auto-scrolls during long streaming response | 1`] = String.raw`
╭────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Smithers v0.1.0 │   demo-mode                                                                                          │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│  │ write a very long detailed response about programming                                                               │
│                                                                                                                        │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│  │ hello                                                                                                               │
│                                                                                                                        │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│  │ hello                                                                                                               │
│                                                                                                                        │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│  │ first message                                                                                                       │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                                                                                                        │
│  ╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮  │
│  │> write                                                                                                           │  │
│  │                                                                                                                  │  │
│  ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯  │
│                                                                                                                        │
│ ? help │   Esc interrupt │   Ctrl+C clear │   / commands │                                                             │
╰────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
`;

exports[`Day 50: Long Response Auto-Scroll › auto-scrolls during long streaming response | 1 1`] = String.raw`
╭────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Smithers v0.1.0 │   demo-mode                                                                                          │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│  │ write a very long detailed response about programming                                                               │
│                                                                                                                        │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│  │ hello                                                                                                               │
│                                                                                                                        │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│  │ hello                                                                                                               │
│                                                                                                                        │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│  │ first message                                                                                                       │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                                                                                                        │
│  ╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮  │
│  │> write a very lo                                                                                                 │  │
│  │                                                                                                                  │  │
│  ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯  │
│                                                                                                                        │
│ ? help │   Esc interrupt │   Ctrl+C clear │   / commands │                                                             │
╰────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
`;

exports[`Day 50: Long Response Auto-Scroll › auto-scrolls during long streaming response | 1 2`] = String.raw`
╭────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Smithers v0.1.0 │   demo-mode                                                                                          │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│  │ write a very long detailed response about programming                                                               │
│                                                                                                                        │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│  │ hello                                                                                                               │
│                                                                                                                        │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│  │ hello                                                                                                               │
│                                                                                                                        │
│  I'm running in demo mode (no API key). Set ANTHROPICAPIKEY to enable AI responses.                                    │
│                                                                                                                        │
│  │ first message                                                                                                       │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                Note: ANTHROPIC_API_KEY not set. Running in demo mode.                                  │
│                                                                                                                        │
│                                                                                                                        │
│  ╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮  │
│  │> write a very long detailed response about pr                                                                    │  │
│  │                                                                                                                  │  │
│  ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯  │
│                                                                                                                        │
│ ? help │   Esc interrupt │   Ctrl+C clear │   / commands │                                                             │
╰────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
`;

